
<!DOCTYPE html>


<html lang="en" data-content_root="./" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Ling 380 - Week 11 &#8212; My sample book</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="_static/styles/theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="_static/styles/bootstrap.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="_static/styles/pydata-sphinx-theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />

  
  <link href="_static/vendor/fontawesome/6.5.2/css/all.min.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=03e43079" />
    <link rel="stylesheet" type="text/css" href="_static/styles/sphinx-book-theme.css?v=eba8b062" />
    <link rel="stylesheet" type="text/css" href="_static/togglebutton.css?v=13237357" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="_static/mystnb.8ecb98da25f57f5357bf6f572d296f466b2cfe2517ffebfabe82451661e28f02.css?v=6644e6bb" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-thebe.css?v=4fa983c6" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-design.min.css?v=95c83b7e" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b" />
<link rel="preload" as="script" href="_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b" />
  <script src="_static/vendor/fontawesome/6.5.2/js/all.min.js?digest=dfe6caa3a7d634c4db9b"></script>

    <script src="_static/documentation_options.js?v=9eb32ce0"></script>
    <script src="_static/doctools.js?v=9a2dae69"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="_static/copybutton.js?v=f281be69"></script>
    <script src="_static/scripts/sphinx-book-theme.js?v=887ef09a"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="_static/togglebutton.js?v=4a39c7ea"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="_static/design-tabs.js?v=f930bc37"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script async="async" src="_static/sphinx-thebe.js?v=c100c467"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'Week_11';</script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Ling 380 - Week 12" href="Week_12.html" />
    <link rel="prev" title="Ling 380 - Week 10" href="Week_10.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-primary-sidebar-checkbox"/>
  <label class="overlay overlay-primary" for="pst-primary-sidebar-checkbox"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-secondary-sidebar-checkbox"/>
  <label class="overlay overlay-secondary" for="pst-secondary-sidebar-checkbox"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  
    
  

<a class="navbar-brand logo" href="intro.html">
  
  
  
  
  
    
    
      
    
    
    <img src="_static/logo.png" class="logo__image only-light" alt="My sample book - Home"/>
    <script>document.write(`<img src="_static/logo.png" class="logo__image only-dark" alt="My sample book - Home"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item">

 <script>
 document.write(`
   <button class="btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="intro.html">
                    Welcome to your Jupyter Book
                </a>
            </li>
        </ul>
        <ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="Week_01.html">Ling380 - Week 1</a></li>
<li class="toctree-l1"><a class="reference internal" href="Week_02.html">Ling380 - Week 2</a></li>
<li class="toctree-l1"><a class="reference internal" href="Week_03.html">Ling 380 - Week 3</a></li>
<li class="toctree-l1"><a class="reference internal" href="Week_04.html">Ling 380 - Week 4</a></li>
<li class="toctree-l1"><a class="reference internal" href="Week_05.html">Ling 380 - Week 5</a></li>

<li class="toctree-l1"><a class="reference internal" href="Week_06.html">Ling 380 - Week 6</a></li>




<li class="toctree-l1"><a class="reference internal" href="Week_07.html">Ling 380 - Week 7</a></li>



<li class="toctree-l1"><a class="reference internal" href="Week_08.html">Ling 380 - Week 8</a></li>



<li class="toctree-l1"><a class="reference internal" href="Week_09.html">Ling 380 - Week 9</a></li>



<li class="toctree-l1"><a class="reference internal" href="Week_10.html">Ling 380 - Week 10</a></li>



<li class="toctree-l1 current active"><a class="current reference internal" href="#">Ling 380 - Week 11</a></li>




<li class="toctree-l1"><a class="reference internal" href="Week_12.html">Ling 380 - Week 12</a></li>


<li class="toctree-l1"><a class="reference internal" href="Week_13.html">Ling 380 - Week 13</a></li>


<li class="toctree-l1"><a class="reference internal" href="nltk_install.html">Installing NLTK</a></li>
<li class="toctree-l1"><a class="reference internal" href="spacy_install.html">Installing spaCy</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><button class="sidebar-toggle primary-toggle btn btn-sm" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</button></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/executablebooks/jupyter-book" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/executablebooks/jupyter-book/issues/new?title=Issue%20on%20page%20%2FWeek_11.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="_sources/Week_11.ipynb" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.ipynb</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="theme-switch fa-solid fa-sun fa-lg" data-mode="light"></i>
    <i class="theme-switch fa-solid fa-moon fa-lg" data-mode="dark"></i>
    <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"></i>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm pst-navbar-icon search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<button class="sidebar-toggle secondary-toggle btn btn-sm" title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</button>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Ling 380 - Week 11</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#">Ling 380 - Week 11</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#processing-survey-data">Processing survey data</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#data">Data</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#import-statements">Import statements</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#import-and-examine-the-data">Import and examine the data</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#working-with-one-column">Working with one column</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#get-frequencies">Get frequencies</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#word-clouds">Word clouds</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#with-the-frequency-dictionary">With the frequency dictionary</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#named-entities">Named entities</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#redacting-documents">Redacting documents</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#summary">Summary</a></li>
</ul>

            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="ling-380-week-11">
<h1>Ling 380 - Week 11<a class="headerlink" href="#ling-380-week-11" title="Link to this heading">#</a></h1>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="processing-survey-data">
<h1>Processing survey data<a class="headerlink" href="#processing-survey-data" title="Link to this heading">#</a></h1>
<p>Survey answers are typically of the style below, with a very specific question and a <a class="reference external" href="https://en.wikipedia.org/wiki/Likert_scale">Likert scale</a> that forces the answers into clearly defined categories.</p>
<figure>
    <img src="./img/Likert.png" style="width:450px;"
         alt="supervised classification">
</figure>
<p>This is easy to process, as the answers can be tabulated. Some surveys, however, allow free-text answers. This is the case in the type of question you get at the end of a survey, something like “Anything else you’d like to tell us?”. It’s also common in focus groups and submissions in public consultation processes. These can go from one-word answers and short sentences to long paragraphs. That’s the type of unstructured data that you need text analysis for!</p>
<p>There are many ways we can analyze and summarize the information. we’ll focus on:</p>
<ul class="simple">
<li><p>Visualization with word clouds</p></li>
<li><p>NER recognition</p></li>
<li><p>Redaction</p></li>
</ul>
<section id="data">
<h2>Data<a class="headerlink" href="#data" title="Link to this heading">#</a></h2>
<p>There are many public surveys and sources of data (see at the end for more links). Here, we will work with the <a class="reference external" href="https://odesi.ca/en/details?id=/odesi/doi__10-5683_SP3_TEKM3T.xml">Democracy Checkup</a> distributed by <a class="reference external" href="https://odesi.ca/en">Odesi</a>, a Canadian consortium that holds social science data. This is a survey of Canadian attitudes about democratic values, public policies, and current issues:</p>
<ul class="simple">
<li><p>Harell, Allison; Stephenson, B. Laura; Rubenson, Daniel; Loewen, Peter John, 2023, “Democracy Checkup, 2022. Canada”, <a class="reference external" href="https://doi.org/10.5683/SP3/TEKM3T">https://doi.org/10.5683/SP3/TEKM3T</a>, Borealis, V1, UNF:6:ufqbMikbXcaHqVhbaEXR3w== (fileUNF)</p></li>
</ul>
<p>The data contains many different variables, most of them numeric or on a scale with fixed values to choose from. But some of the values are free-form text answers; we’ll study those.</p>
</section>
<section id="import-statements">
<h2>Import statements<a class="headerlink" href="#import-statements" title="Link to this heading">#</a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># run this only once, to install wordcloud</span>

<span class="o">!</span>pip<span class="w"> </span>install<span class="w"> </span>wordcloud
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Requirement already satisfied: wordcloud in /opt/anaconda3/lib/python3.11/site-packages (1.9.4)
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Requirement already satisfied: numpy&gt;=1.6.1 in /Users/yifangyuan/.local/lib/python3.11/site-packages (from wordcloud) (1.26.4)
Requirement already satisfied: pillow in /opt/anaconda3/lib/python3.11/site-packages (from wordcloud) (10.2.0)
Requirement already satisfied: matplotlib in /opt/anaconda3/lib/python3.11/site-packages (from wordcloud) (3.8.0)
Requirement already satisfied: contourpy&gt;=1.0.1 in /opt/anaconda3/lib/python3.11/site-packages (from matplotlib-&gt;wordcloud) (1.2.0)
Requirement already satisfied: cycler&gt;=0.10 in /opt/anaconda3/lib/python3.11/site-packages (from matplotlib-&gt;wordcloud) (0.11.0)
Requirement already satisfied: fonttools&gt;=4.22.0 in /opt/anaconda3/lib/python3.11/site-packages (from matplotlib-&gt;wordcloud) (4.25.0)
Requirement already satisfied: kiwisolver&gt;=1.0.1 in /opt/anaconda3/lib/python3.11/site-packages (from matplotlib-&gt;wordcloud) (1.4.4)
Requirement already satisfied: packaging&gt;=20.0 in /opt/anaconda3/lib/python3.11/site-packages (from matplotlib-&gt;wordcloud) (23.1)
Requirement already satisfied: pyparsing&gt;=2.3.1 in /opt/anaconda3/lib/python3.11/site-packages (from matplotlib-&gt;wordcloud) (3.0.9)
Requirement already satisfied: python-dateutil&gt;=2.7 in /opt/anaconda3/lib/python3.11/site-packages (from matplotlib-&gt;wordcloud) (2.8.2)
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Requirement already satisfied: six&gt;=1.5 in /opt/anaconda3/lib/python3.11/site-packages (from python-dateutil&gt;=2.7-&gt;matplotlib-&gt;wordcloud) (1.16.0)
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">os</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">pandas</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pd</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">matplotlib.pyplot</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">plt</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">wordcloud</span><span class="w"> </span><span class="kn">import</span> <span class="n">WordCloud</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">nltk</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">nltk</span><span class="w"> </span><span class="kn">import</span> <span class="n">word_tokenize</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">nltk</span><span class="w"> </span><span class="kn">import</span> <span class="n">FreqDist</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">nltk.corpus</span><span class="w"> </span><span class="kn">import</span> <span class="n">stopwords</span>
<span class="n">stop_words</span> <span class="o">=</span> <span class="n">stopwords</span><span class="o">.</span><span class="n">words</span><span class="p">(</span><span class="s1">&#39;english&#39;</span><span class="p">)</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">spacy</span>
<span class="n">nlp</span> <span class="o">=</span> <span class="n">spacy</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s2">&quot;en_core_web_sm&quot;</span><span class="p">)</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">spacy</span><span class="w"> </span><span class="kn">import</span> <span class="n">displacy</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="import-and-examine-the-data">
<h2>Import and examine the data<a class="headerlink" href="#import-and-examine-the-data" title="Link to this heading">#</a></h2>
<p>The data is huge: 9,829 rows (answers) and 501 questions (columns). As you can see from the output of <code class="docutils literal notranslate"><span class="pre">df.head()</span></code>, most of the data is numerical, so we’ll work only with text columns. Luckily, those columns always end with the string “TEXT”, so we can use pandas to extract them. For instance:</p>
<ul class="simple">
<li><p>dc22_vote_choice_6_TEXT – what party the person intends to vote for (in Dec 2022)</p></li>
<li><p>dc22_soc_media_use_9_TEXT – what social media the person uses</p></li>
<li><p>dc22_language_3_TEXT – what language the person speaks</p></li>
<li><p>etc.</p></li>
</ul>
<p>You can use the <a class="reference external" href="https://borealisdata.ca/data-explorer/?siteUrl=https:%2F%2Fborealisdata.ca&amp;amp;dvLocale=en&amp;amp;fileId=659110">Data explorer</a> for this dataset to check the actual questions for each of these columns.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;./data/cora-cdem-2022_F1.csv&#39;</span><span class="p">,</span> <span class="n">encoding</span> <span class="o">=</span> <span class="s1">&#39;utf-8&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>/var/folders/wz/znms9m4s22s58bm3g8k29fd40000gn/T/ipykernel_73620/4286278608.py:1: DtypeWarning: Columns (42,162,183) have mixed types. Specify dtype option on import or set low_memory=False.
  df = pd.read_csv(&#39;./data/cora-cdem-2022_F1.csv&#39;, encoding = &#39;utf-8&#39;)
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="o">.</span><span class="n">info</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;class &#39;pandas.core.frame.DataFrame&#39;&gt;
RangeIndex: 9829 entries, 0 to 9828
Columns: 501 entries, StartDate to dc22_quota_weight
dtypes: float64(230), int64(235), object(36)
memory usage: 37.6+ MB
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>StartDate</th>
      <th>EndDate</th>
      <th>Duration__in_seconds_</th>
      <th>time</th>
      <th>RecordedDate</th>
      <th>ResponseId</th>
      <th>UserLanguage</th>
      <th>survey_wave</th>
      <th>dc22_consent_t_First_Click</th>
      <th>dc22_consent_t_Last_Click</th>
      <th>...</th>
      <th>FL_59_DO_Participation2</th>
      <th>FL_307_DO_Feminismmodule_attitud</th>
      <th>FL_307_DO_Feminismmodule_attitu0</th>
      <th>FL_307_DO_Feminismmodule_genderg</th>
      <th>Attitudes1_politicianattitudes_D</th>
      <th>Attitudes1_politicianattitudes_0</th>
      <th>feduid</th>
      <th>fedname</th>
      <th>pccf_problem</th>
      <th>dc22_quota_weight</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>2022-05-10</td>
      <td>2022-05-10</td>
      <td>954</td>
      <td>15.900000</td>
      <td>2022-05-10</td>
      <td>R_00PSowpHejLqKkN</td>
      <td>EN</td>
      <td>0</td>
      <td>2.888</td>
      <td>2.888</td>
      <td>...</td>
      <td>2</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>1.0</td>
      <td>35096</td>
      <td>Scarborough North / Scarborough-Nord</td>
      <td>NaN</td>
      <td>1.423473</td>
    </tr>
    <tr>
      <th>1</th>
      <td>2022-05-15</td>
      <td>2022-05-15</td>
      <td>634</td>
      <td>10.566667</td>
      <td>2022-05-15</td>
      <td>R_00VQRL4tWUjAZmF</td>
      <td>EN</td>
      <td>0</td>
      <td>1.409</td>
      <td>4.597</td>
      <td>...</td>
      <td>3</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>1.0</td>
      <td>NaN</td>
      <td>35051</td>
      <td>London--Fanshawe</td>
      <td>NaN</td>
      <td>1.045923</td>
    </tr>
    <tr>
      <th>2</th>
      <td>2022-05-08</td>
      <td>2022-05-08</td>
      <td>827</td>
      <td>13.783334</td>
      <td>2022-05-08</td>
      <td>R_00VXF28obYi9pVT</td>
      <td>FR-CA</td>
      <td>1</td>
      <td>2.374</td>
      <td>5.334</td>
      <td>...</td>
      <td>3</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>1.0</td>
      <td>NaN</td>
      <td>24015</td>
      <td>Bourassa</td>
      <td>NaN</td>
      <td>0.584379</td>
    </tr>
    <tr>
      <th>3</th>
      <td>2022-05-12</td>
      <td>2022-05-13</td>
      <td>1257</td>
      <td>20.950001</td>
      <td>2022-05-13</td>
      <td>R_00wdiUEEZtW4hWh</td>
      <td>EN</td>
      <td>0</td>
      <td>79.501</td>
      <td>81.449</td>
      <td>...</td>
      <td>3</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>1.0</td>
      <td>NaN</td>
      <td>59035</td>
      <td>Vancouver East / Vancouver-Est</td>
      <td>NaN</td>
      <td>1.446689</td>
    </tr>
    <tr>
      <th>4</th>
      <td>2022-05-09</td>
      <td>2022-05-09</td>
      <td>914</td>
      <td>15.233334</td>
      <td>2022-05-09</td>
      <td>R_01HAWiwkLRFthTz</td>
      <td>EN</td>
      <td>0</td>
      <td>1.608</td>
      <td>3.744</td>
      <td>...</td>
      <td>1</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>1.0</td>
      <td>NaN</td>
      <td>12006</td>
      <td>Halifax West / Halifax-Ouest</td>
      <td>1.0</td>
      <td>1.476455</td>
    </tr>
  </tbody>
</table>
<p>5 rows × 501 columns</p>
</div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># check which columns contain the word &quot;TEXT&quot; using a regular expression</span>

<span class="nb">print</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">regex</span><span class="o">=</span><span class="s1">&#39;TEXT&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">columns</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Index([&#39;dc22_genderid_4_TEXT&#39;, &#39;dc22_vote_choice_6_TEXT&#39;,
       &#39;dc22_provvote_14_TEXT&#39;, &#39;dc22_feedback_screen_6_TEXT&#39;,
       &#39;dc22_feedback_recent_21_TEXT&#39;, &#39;dc22_cc2_4_TEXT&#39;,
       &#39;dc22_soc_media_use_9_TEXT&#39;, &#39;dc22_party_id_6_TEXT&#39;,
       &#39;dc22_vote_2021_6_TEXT&#39;, &#39;dc22_language_3_TEXT&#39;, &#39;dc22_vismin_13_TEXT&#39;,
       &#39;dc22_employment_12_TEXT&#39;, &#39;dc22_disabilitytype_6_TEXT&#39;,
       &#39;dc22_religion_22_TEXT&#39;],
      dtype=&#39;object&#39;)
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># create a new dataframe, &#39;df_text&#39; that contains only those columns</span>

<span class="n">df_text</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">regex</span><span class="o">=</span><span class="s1">&#39;TEXT&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df_text</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>dc22_genderid_4_TEXT</th>
      <th>dc22_vote_choice_6_TEXT</th>
      <th>dc22_provvote_14_TEXT</th>
      <th>dc22_feedback_screen_6_TEXT</th>
      <th>dc22_feedback_recent_21_TEXT</th>
      <th>dc22_cc2_4_TEXT</th>
      <th>dc22_soc_media_use_9_TEXT</th>
      <th>dc22_party_id_6_TEXT</th>
      <th>dc22_vote_2021_6_TEXT</th>
      <th>dc22_language_3_TEXT</th>
      <th>dc22_vismin_13_TEXT</th>
      <th>dc22_employment_12_TEXT</th>
      <th>dc22_disabilitytype_6_TEXT</th>
      <th>dc22_religion_22_TEXT</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>-99</td>
      <td>-99</td>
      <td>-99</td>
      <td>-99</td>
      <td>NaN</td>
      <td>-99</td>
      <td>-99</td>
      <td>-99</td>
      <td>NaN</td>
      <td>-99</td>
      <td>-99</td>
      <td>-99</td>
      <td>NaN</td>
      <td>-99</td>
    </tr>
    <tr>
      <th>1</th>
      <td>-99</td>
      <td>-99</td>
      <td>-99</td>
      <td>-99</td>
      <td>NaN</td>
      <td>-99</td>
      <td>-99</td>
      <td>-99</td>
      <td>-99</td>
      <td>-99</td>
      <td>-99</td>
      <td>-99</td>
      <td>NaN</td>
      <td>-99</td>
    </tr>
    <tr>
      <th>2</th>
      <td>-99</td>
      <td>-99</td>
      <td>-99</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>-99</td>
      <td>-99</td>
      <td>-99</td>
      <td>-99</td>
      <td>-99</td>
      <td>-99</td>
      <td>-99</td>
      <td>NaN</td>
      <td>-99</td>
    </tr>
    <tr>
      <th>3</th>
      <td>-99</td>
      <td>-99</td>
      <td>Aaron Gunn</td>
      <td>-99</td>
      <td>NaN</td>
      <td>-99</td>
      <td>-99</td>
      <td>-99</td>
      <td>-99</td>
      <td>-99</td>
      <td>-99</td>
      <td>-99</td>
      <td>NaN</td>
      <td>Agnostic</td>
    </tr>
    <tr>
      <th>4</th>
      <td>-99</td>
      <td>-99</td>
      <td>-99</td>
      <td>-99</td>
      <td>NaN</td>
      <td>-99</td>
      <td>-99</td>
      <td>-99</td>
      <td>NaN</td>
      <td>-99</td>
      <td>-99</td>
      <td>-99</td>
      <td>NaN</td>
      <td>-99</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>9824</th>
      <td>-99</td>
      <td>-99</td>
      <td>-99</td>
      <td>-99</td>
      <td>NaN</td>
      <td>human activity does not affect climate</td>
      <td>NaN</td>
      <td>-99</td>
      <td>-99</td>
      <td>-99</td>
      <td>none</td>
      <td>-99</td>
      <td>NaN</td>
      <td>-99</td>
    </tr>
    <tr>
      <th>9825</th>
      <td>-99</td>
      <td>-99</td>
      <td>-99</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>-99</td>
      <td>-99</td>
      <td>-99</td>
      <td>-99</td>
      <td>-99</td>
      <td>-99</td>
      <td>-99</td>
      <td>NaN</td>
      <td>-99</td>
    </tr>
    <tr>
      <th>9826</th>
      <td>-99</td>
      <td>-99</td>
      <td>-99</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>-99</td>
      <td>-99</td>
      <td>-99</td>
      <td>-99</td>
      <td>-99</td>
      <td>-99</td>
      <td>-99</td>
      <td>NaN</td>
      <td>-99</td>
    </tr>
    <tr>
      <th>9827</th>
      <td>-99</td>
      <td>-99</td>
      <td>-99</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>-99</td>
      <td>-99</td>
      <td>-99</td>
      <td>-99</td>
      <td>italien</td>
      <td>-99</td>
      <td>-99</td>
      <td>NaN</td>
      <td>-99</td>
    </tr>
    <tr>
      <th>9828</th>
      <td>-99</td>
      <td>-99</td>
      <td>-99</td>
      <td>-99</td>
      <td>NaN</td>
      <td>-99</td>
      <td>-99</td>
      <td>-99</td>
      <td>-99</td>
      <td>-99</td>
      <td>-99</td>
      <td>-99</td>
      <td>NaN</td>
      <td>-99</td>
    </tr>
  </tbody>
</table>
<p>9829 rows × 14 columns</p>
</div></div></div>
</div>
</section>
<section id="working-with-one-column">
<h2>Working with one column<a class="headerlink" href="#working-with-one-column" title="Link to this heading">#</a></h2>
<p>We will work with one of the columns, ‘dc22_vote_choice_6_TEXT’, where the question was: “If a federal election were held today, which party would you be most likely to vote for?”</p>
<p>We will first extract data from that column to a pandas series. When extracting, we will drop any empty values (NaN) with <code class="docutils literal notranslate"><span class="pre">dropna()</span></code> and the columns that contain ‘-99’, which means the person did not answer this question.</p>
<p>Then, we put that into a string variable and lowercase it (so that “People’s Party” and “People’s party” are considered the same). But then we realize actually that the word “party” occurs here a lot, so we’ll simply remove it with the stopwords.</p>
<p>Finally, we have a somewhat clean string of words that we can send to WordCloud to visualize.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># most of the values are &#39;-99&#39; (unanswered)</span>
<span class="c1"># but you can sort other values to find the most frequent in a column</span>

<span class="n">df_text</span><span class="p">[</span><span class="s1">&#39;dc22_vote_choice_6_TEXT&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()[:</span><span class="mi">20</span><span class="p">]</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>dc22_vote_choice_6_TEXT
-99                          9102
PPC                            52
Undecided                      27
undecided                      15
People&#39;s Party of Canada       13
People&#39;s Party                 11
Not sure                        9
Ppc                             9
Unsure                          9
Maverick                        6
Peoples Party                   5
Independent                     5
UNDECIDED                       4
Parti populaire du Canada       4
People&#39;s party                  4
not sure                        4
Parti Populaire du Canada       4
Peoples Party of Canada         4
unsure                          4
Je ne sais pas                  4
Name: count, dtype: int64
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">vote_choice</span> <span class="o">=</span> <span class="n">df_text</span><span class="p">[</span><span class="s1">&#39;dc22_vote_choice_6_TEXT&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">dropna</span><span class="p">()</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">df_text</span><span class="p">[</span><span class="s1">&#39;dc22_vote_choice_6_TEXT&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="s1">&#39;99&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="kc">False</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">vote_choice</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>13      Any but Liberals or NDP
21                          NDP
30              Je ne sais pas.
73                          PPC
119                         PPC
                 ...           
9658                  undecided
9668                        PPC
9674          The Peoples party
9811                        PPC
9819         Refuse de répondre
Name: dc22_vote_choice_6_TEXT, Length: 419, dtype: object
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># this is a pandas series, so we&#39;ll convert it to a string</span>
<span class="nb">type</span><span class="p">(</span><span class="n">vote_choice</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>pandas.core.series.Series
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">vote_choice_str</span> <span class="o">=</span> <span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">vote_choice</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">str</span><span class="p">))</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">vote_choice_str</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&#39;Any but Liberals or NDP, NDP, Je ne sais pas., PPC, PPC, Ontario Party, Parti populaire du Canada, Peoples Party of Canada, wildrose, PEOPLE\&#39;S PARTY OF CANADA, Undecided, People\&#39;s party, I honestly dont know, Indécision, Uncertain, Undecided, A Party that I prefer, cancel my vote, Don\&#39;t vote party, vote the candidate, People\&#39;s Party of Canada, Maverick, PPC, aucun, Peoples Party of Canada, They are all the same, People’s Party of Canada, Undecided, Peoples, I dont disclose my voting preference, undecided, Don\&#39;t know, NOT SURE, Who are the candidates in my riding, No idea, PPC, PPC, Parti populaire du Canada, Undecided, PPC, PPC, PPC, western sepratist, Ppc, Libertarian, Not sure, People\&#39;s party, PPC, caq, undecided, Annulation, I, Undecided, People\&#39;s Party of Canada, PPC, Peoples’ Party of Canada, Undecided, Je ne sais pas, Je ne sais pas, CPP, Not Sure, unsure, None of the above, I don’t know, We\&#39;ll see, New Blue, ppc, Parti Populaire du Canada, undecided, Independent, People\&#39;s Party, PPC, M, I am undecided, PPC, Ppc, NOT SIRE, ne sais pas, I\&#39;m not sure!!, Maveric, Independent, Indécise, Undecided, People\&#39;s Party of Canada, all parties suck, Parti Populaire du Canada, partie populaire, Québec solidaire, Undecided, Peoples Party of Canada, Undecided, PPC, People’s Party of Canada, Where is none of the above, annuler mon vote, Maverick, No decision, Unsure, undecided, Maverick, Je n\&#39;arrive pas à me décider, Not sure, Coalition avenir Québec, Ppc, Anything that would support removal restrictions, Undecided, PPC, Maverick, Don\&#39;t know, don\&#39;t know, Ye, Je ne sais pas, PPC, undecided, Undecided, Npd, Rhinocéros, Not sure, Blanc, don\&#39;t know, Undecided, People\&#39;s Party, protest vote, Maverick, PPC, undecided, Undecided, Not sure, Parti Rhinocéros, UFF, I will not answer this question, but it wouldn\&#39;t be the &quot;main 4&quot;, People\&#39;s Party of Canada, NIL, PPC, Unsure, Parti populaire Canada ou Conservateur, undecided, Blue Party, NPD, I really don\&#39;t know, Communist Party, UNDECIDED, Unsure, Ppc, Not sure, Maverick Party, Parti Populaire du Canada, People\&#39;s Party, I do not know, Je sais pas, NONE, Independent, PPC, caq, The Wayne Foundation, peoples oarty, PEOPLES PARTY, People\&#39;s party, Ne sais pas, Indépendant, People\&#39;s Party of Canada, unknown, Rhinocéros, independent, No confidence, not sure, PPC, People\&#39;s Party of Canada, Je ne sais pas, Rhinoceros Party, Je garde cette info confidentiel, Parti populaire du Canada, undecided, PPC, PPC, Parti populaire (PPC), Peoples party, PPC, buffalo, Independent, I am not sure, People\&#39;s Party, Noyb, unknown, PPC, a venir, Bernier, PPC, Unsure, UNDECIDED, Ppc, People\&#39;s Party, PPC, People\&#39;s Party of Canada, Peoples Party, Ontario, Undecided, People\&#39;s Party, People party, PPC, Peoples party, Any other party, Caq, Undecided, Not sure, Undecided, Ontario party, new blue party, Undecided, PPC, Peoples Party, none of the above, Undecided, Ppc, undecided, Je ne sais pas encore, Unsure, People\&#39;s party, ppc, Indecis, PPC, Don\&#39;t know, Peoples Party, PPC, not liberal, people\&#39;s party, ppc, I don\&#39;t vote for a party. I vote for a person., ,, CAQ, one for disability ppl, I would spoil my ballot, Ppc, Undecided, People party, Parti popuaire, free party canada, PPC, still deciding, Am unsure at this time; lean to Conservative, I don’t know, PPC, Libertarian Party of Canada, PPC, People\&#39;s Party of Canada, I am undecided, People\&#39;s Party, Separatist, Coalition Avenir Quebec, People’s party, Partie populaire du Canada, MAVERICK, UNDECIDED, Do not kow, Vote blanc comptabilisé, Undecided, Ontario party, Unsure, unsure, Independent candidate, ne sais pas, Je ses pas, NOT SURE, I’m not sure, I will vote for Anyone other than liberal, undecided, je devrais m\&#39;informer avant de choisir mon vote, I am not sure at this time?, Libertarian, I don’t know, Ne sait pas encore, Undecided, I honestly dont know, Not sure, Peoples Party Canada, People\&#39;s Party, Bloc Québécois, not sure who i would vote for, Npd, PPC, People\&#39;s Party of Canada, Undecided, People\&#39;s Party of Canada, Any Western separatist party, PPC, Anyone other than Liberals they are severely screwing Canada over, dont know, don\&#39;t know who I would vote for, indécis, aucun de ces partis, undecided, Je ne sais pas?, People Party of Canada, je ne sais pas pour lequel des partis je serais tenter de plus voter  puisque je n\&#39;ai pas pris connaissance des plateformes électorales/projets/intentions/positions de chacun des partis pour être en mesure de faire un choix éclairé, I vote for the best local candidate, Parti nul, NDP, PPC, People\&#39;s Party, UNSURE, indécis, CAQ, PEOPLE\&#39;S PARTY, UNSURE, PPC, I\&#39;m not sure, I would need to do more reading as to what each party is offering., Peoples Party Canada, Not sure, I\&#39;m undecided, PPC, autre, people\&#39;s party, I vote based on the quality of the individual candidates rather than political party affiliation, PPC, PPC, don\&#39;t know, undecided, Peoples Party of Canada, People\&#39;s Party of Canada, Un parti plus intelligent et à date ils en existe pas, Communist, People\&#39;s party of canada, j\&#39;annulerais mon vote, Je ne sais pas encore, Ppc, Vote blanc, Aucune idée tous des menteurs, independant, Don\&#39;t know yet, Peoples Party, not sure, CPC, Not sure, PPC, Maverick party, Parti populaire du Canada, Unsure, PPC, PPC, Undecided, Still not sure, PPC, The pig party, libertarian, ne sais pas encore, Québec solidaire, idk, I\&#39;m not sure yet, Peoples Party, unsure, Independent, Seriously undecided, Parti Populaire du Canada, Maverick Party, don\&#39;t know Unsure, Not sure yet, People\&#39;s Party of Canada, PPC, PPC, Maverick, Not sure yet, J\&#39;annule mon vote, Christian heritage party, PPC, Coak, People\&#39;s Party, Maverick Party, Ppc, Don’t know, not sure, Unsure at this time, Undecided, Do not n, Annuler mon vote, parti populaire du Canada (PPC), Undecided, need to see platform, je sais pas, People, undecided, indecis, Npd, UNDECIDED, PPC, PPC, Undecided, People\&#39;s Party, undecided, Utterly disappointed in all political parties and am not sure if and for whom I will vote, ??????, I voted conservative in the past but now they are a joke, TrueBlue, People’s party, Communist Party, Indécise, pcc, Parti populaire, let unvaccinated canadians fly, Unsure, Undecided, I will spoil my ballot, Unsure, Undecided, PPC, parti populaire, Annuleraus mon vote, Parti populaire, PPC, People\&#39;s Party of Canada, indécise, Still undecided, Parti populaire, Je ne le sais pas, not sure, unsure, CPP, undecided, PPC, The Peoples party, PPC, Refuse de répondre&#39;
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># check the contents of stop_words</span>

<span class="n">stop_words</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[&#39;a&#39;,
 &#39;about&#39;,
 &#39;above&#39;,
 &#39;after&#39;,
 &#39;again&#39;,
 &#39;against&#39;,
 &#39;ain&#39;,
 &#39;all&#39;,
 &#39;am&#39;,
 &#39;an&#39;,
 &#39;and&#39;,
 &#39;any&#39;,
 &#39;are&#39;,
 &#39;aren&#39;,
 &quot;aren&#39;t&quot;,
 &#39;as&#39;,
 &#39;at&#39;,
 &#39;be&#39;,
 &#39;because&#39;,
 &#39;been&#39;,
 &#39;before&#39;,
 &#39;being&#39;,
 &#39;below&#39;,
 &#39;between&#39;,
 &#39;both&#39;,
 &#39;but&#39;,
 &#39;by&#39;,
 &#39;can&#39;,
 &#39;couldn&#39;,
 &quot;couldn&#39;t&quot;,
 &#39;d&#39;,
 &#39;did&#39;,
 &#39;didn&#39;,
 &quot;didn&#39;t&quot;,
 &#39;do&#39;,
 &#39;does&#39;,
 &#39;doesn&#39;,
 &quot;doesn&#39;t&quot;,
 &#39;doing&#39;,
 &#39;don&#39;,
 &quot;don&#39;t&quot;,
 &#39;down&#39;,
 &#39;during&#39;,
 &#39;each&#39;,
 &#39;few&#39;,
 &#39;for&#39;,
 &#39;from&#39;,
 &#39;further&#39;,
 &#39;had&#39;,
 &#39;hadn&#39;,
 &quot;hadn&#39;t&quot;,
 &#39;has&#39;,
 &#39;hasn&#39;,
 &quot;hasn&#39;t&quot;,
 &#39;have&#39;,
 &#39;haven&#39;,
 &quot;haven&#39;t&quot;,
 &#39;having&#39;,
 &#39;he&#39;,
 &quot;he&#39;d&quot;,
 &quot;he&#39;ll&quot;,
 &#39;her&#39;,
 &#39;here&#39;,
 &#39;hers&#39;,
 &#39;herself&#39;,
 &quot;he&#39;s&quot;,
 &#39;him&#39;,
 &#39;himself&#39;,
 &#39;his&#39;,
 &#39;how&#39;,
 &#39;i&#39;,
 &quot;i&#39;d&quot;,
 &#39;if&#39;,
 &quot;i&#39;ll&quot;,
 &quot;i&#39;m&quot;,
 &#39;in&#39;,
 &#39;into&#39;,
 &#39;is&#39;,
 &#39;isn&#39;,
 &quot;isn&#39;t&quot;,
 &#39;it&#39;,
 &quot;it&#39;d&quot;,
 &quot;it&#39;ll&quot;,
 &quot;it&#39;s&quot;,
 &#39;its&#39;,
 &#39;itself&#39;,
 &quot;i&#39;ve&quot;,
 &#39;just&#39;,
 &#39;ll&#39;,
 &#39;m&#39;,
 &#39;ma&#39;,
 &#39;me&#39;,
 &#39;mightn&#39;,
 &quot;mightn&#39;t&quot;,
 &#39;more&#39;,
 &#39;most&#39;,
 &#39;mustn&#39;,
 &quot;mustn&#39;t&quot;,
 &#39;my&#39;,
 &#39;myself&#39;,
 &#39;needn&#39;,
 &quot;needn&#39;t&quot;,
 &#39;no&#39;,
 &#39;nor&#39;,
 &#39;not&#39;,
 &#39;now&#39;,
 &#39;o&#39;,
 &#39;of&#39;,
 &#39;off&#39;,
 &#39;on&#39;,
 &#39;once&#39;,
 &#39;only&#39;,
 &#39;or&#39;,
 &#39;other&#39;,
 &#39;our&#39;,
 &#39;ours&#39;,
 &#39;ourselves&#39;,
 &#39;out&#39;,
 &#39;over&#39;,
 &#39;own&#39;,
 &#39;re&#39;,
 &#39;s&#39;,
 &#39;same&#39;,
 &#39;shan&#39;,
 &quot;shan&#39;t&quot;,
 &#39;she&#39;,
 &quot;she&#39;d&quot;,
 &quot;she&#39;ll&quot;,
 &quot;she&#39;s&quot;,
 &#39;should&#39;,
 &#39;shouldn&#39;,
 &quot;shouldn&#39;t&quot;,
 &quot;should&#39;ve&quot;,
 &#39;so&#39;,
 &#39;some&#39;,
 &#39;such&#39;,
 &#39;t&#39;,
 &#39;than&#39;,
 &#39;that&#39;,
 &quot;that&#39;ll&quot;,
 &#39;the&#39;,
 &#39;their&#39;,
 &#39;theirs&#39;,
 &#39;them&#39;,
 &#39;themselves&#39;,
 &#39;then&#39;,
 &#39;there&#39;,
 &#39;these&#39;,
 &#39;they&#39;,
 &quot;they&#39;d&quot;,
 &quot;they&#39;ll&quot;,
 &quot;they&#39;re&quot;,
 &quot;they&#39;ve&quot;,
 &#39;this&#39;,
 &#39;those&#39;,
 &#39;through&#39;,
 &#39;to&#39;,
 &#39;too&#39;,
 &#39;under&#39;,
 &#39;until&#39;,
 &#39;up&#39;,
 &#39;ve&#39;,
 &#39;very&#39;,
 &#39;was&#39;,
 &#39;wasn&#39;,
 &quot;wasn&#39;t&quot;,
 &#39;we&#39;,
 &quot;we&#39;d&quot;,
 &quot;we&#39;ll&quot;,
 &quot;we&#39;re&quot;,
 &#39;were&#39;,
 &#39;weren&#39;,
 &quot;weren&#39;t&quot;,
 &quot;we&#39;ve&quot;,
 &#39;what&#39;,
 &#39;when&#39;,
 &#39;where&#39;,
 &#39;which&#39;,
 &#39;while&#39;,
 &#39;who&#39;,
 &#39;whom&#39;,
 &#39;why&#39;,
 &#39;will&#39;,
 &#39;with&#39;,
 &#39;won&#39;,
 &quot;won&#39;t&quot;,
 &#39;wouldn&#39;,
 &quot;wouldn&#39;t&quot;,
 &#39;y&#39;,
 &#39;you&#39;,
 &quot;you&#39;d&quot;,
 &quot;you&#39;ll&quot;,
 &#39;your&#39;,
 &quot;you&#39;re&quot;,
 &#39;yours&#39;,
 &#39;yourself&#39;,
 &#39;yourselves&#39;,
 &quot;you&#39;ve&quot;]
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># append the word &quot;party&quot;</span>

<span class="n">stop_words</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;party&#39;</span><span class="p">)</span>
<span class="n">stop_words</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;Canada&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># define a function that: 1. tokenizes, 2. lowercases and</span>
<span class="c1"># 3. removes stopwords</span>

<span class="k">def</span><span class="w"> </span><span class="nf">clean_text</span><span class="p">(</span><span class="n">text</span><span class="p">):</span>
    <span class="n">words</span> <span class="o">=</span> <span class="n">word_tokenize</span><span class="p">(</span><span class="n">text</span><span class="o">.</span><span class="n">lower</span><span class="p">())</span>
    <span class="n">cleaned_words</span> <span class="o">=</span> <span class="p">[</span><span class="n">word</span> <span class="k">for</span> <span class="n">word</span> <span class="ow">in</span> <span class="n">words</span> <span class="k">if</span> <span class="n">word</span><span class="o">.</span><span class="n">isalpha</span><span class="p">()</span> <span class="ow">and</span> <span class="n">word</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">stop_words</span><span class="p">]</span>
    <span class="k">return</span> <span class="s1">&#39; &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">cleaned_words</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">vote_choice_clean</span> <span class="o">=</span> <span class="n">clean_text</span><span class="p">(</span><span class="n">vote_choice_str</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">vote_choice_clean</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&#39;liberals ndp ndp je ne sais ppc ppc ontario parti populaire du canada peoples canada wildrose people canada undecided people honestly dont know indécision uncertain undecided prefer cancel vote vote vote candidate people canada maverick ppc aucun peoples canada people canada undecided peoples dont disclose voting preference undecided know sure candidates riding idea ppc ppc parti populaire du canada undecided ppc ppc ppc western sepratist ppc libertarian sure people ppc caq undecided annulation undecided people canada ppc peoples canada undecided je ne sais pas je ne sais pas cpp sure unsure none know see new blue ppc parti populaire du canada undecided independent people ppc undecided ppc ppc sire ne sais pas sure maveric independent indécise undecided people canada parties suck parti populaire du canada partie populaire québec solidaire undecided peoples canada undecided ppc people canada none annuler mon vote maverick decision unsure undecided maverick je pas à décider sure coalition avenir québec ppc anything would support removal restrictions undecided ppc maverick know know ye je ne sais pas ppc undecided undecided npd rhinocéros sure blanc know undecided people protest vote maverick ppc undecided undecided sure parti rhinocéros uff answer question would main people canada nil ppc unsure parti populaire canada ou conservateur undecided blue npd really know communist undecided unsure ppc sure maverick parti populaire du canada people know je sais pas none independent ppc caq wayne foundation peoples oarty peoples people ne sais pas indépendant people canada unknown rhinocéros independent confidence sure ppc people canada je ne sais pas rhinoceros je garde cette info confidentiel parti populaire du canada undecided ppc ppc parti populaire ppc peoples ppc buffalo independent sure people noyb unknown ppc venir bernier ppc unsure undecided ppc people ppc people canada peoples ontario undecided people people ppc peoples caq undecided sure undecided ontario new blue undecided ppc peoples none undecided ppc undecided je ne sais pas encore unsure people ppc indecis ppc know peoples ppc liberal people ppc vote vote caq one disability ppl would spoil ballot ppc undecided people parti popuaire free canada ppc still deciding unsure time lean conservative know ppc libertarian canada ppc people canada undecided people separatist coalition avenir quebec people partie populaire du canada maverick undecided kow vote blanc comptabilisé undecided ontario unsure unsure independent candidate ne sais pas je ses pas sure sure vote anyone liberal undecided je devrais avant de choisir mon vote sure time libertarian know ne sait pas encore undecided honestly dont know sure peoples canada people bloc québécois sure would vote npd ppc people canada undecided people canada western separatist ppc anyone liberals severely screwing canada dont know know would vote indécis aucun de ces partis undecided je ne sais pas people canada je ne sais pas pour lequel des partis je serais tenter de plus voter puisque je pas pris connaissance des plateformes de chacun des partis pour être en mesure de faire un choix éclairé vote best local candidate parti nul ndp ppc people unsure indécis caq people unsure ppc sure would need reading peoples canada sure undecided ppc autre people vote based quality individual candidates rather political affiliation ppc ppc know undecided peoples canada people canada un parti plus intelligent et à date ils en existe pas communist people canada mon vote je ne sais pas encore ppc vote blanc aucune idée tous des menteurs independant know yet peoples sure cpc sure ppc maverick parti populaire du canada unsure ppc ppc undecided still sure ppc pig libertarian ne sais pas encore québec solidaire idk sure yet peoples unsure independent seriously undecided parti populaire du canada maverick know unsure sure yet people canada ppc ppc maverick sure yet mon vote christian heritage ppc coak people maverick ppc know sure unsure time undecided n annuler mon vote parti populaire du canada ppc undecided need see platform je sais pas people undecided indecis npd undecided ppc ppc undecided people undecided utterly disappointed political parties sure vote voted conservative past joke trueblue people communist indécise pcc parti populaire let unvaccinated canadians fly unsure undecided spoil ballot unsure undecided ppc parti populaire annuleraus mon vote parti populaire ppc people canada indécise still undecided parti populaire je ne le sais pas sure unsure cpp undecided ppc peoples ppc refuse de répondre&#39;
</pre></div>
</div>
</div>
</div>
</section>
<section id="get-frequencies">
<h2>Get frequencies<a class="headerlink" href="#get-frequencies" title="Link to this heading">#</a></h2>
<p>You’ll see below that WordCloud randomizes the font size of the output. But sometimes we want that to be meaningful, reflecting how frequent the word is. To get that information, we will use NLTK’s FreqDist and generate a dictionary when we clean the text.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># define a function that: 1. tokenizes, 2. lowercases,</span>
<span class="c1"># 3. removes stopwords and 4. counts the words</span>

<span class="k">def</span><span class="w"> </span><span class="nf">clean_text_freq</span><span class="p">(</span><span class="n">text</span><span class="p">):</span>
    <span class="n">words</span> <span class="o">=</span> <span class="n">word_tokenize</span><span class="p">(</span><span class="n">text</span><span class="o">.</span><span class="n">lower</span><span class="p">())</span>
    <span class="n">cleaned_words</span> <span class="o">=</span> <span class="p">[</span><span class="n">word</span> <span class="k">for</span> <span class="n">word</span> <span class="ow">in</span> <span class="n">words</span> <span class="k">if</span> <span class="n">word</span><span class="o">.</span><span class="n">isalpha</span><span class="p">()</span> <span class="ow">and</span> <span class="n">word</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">stop_words</span><span class="p">]</span>
    <span class="n">freq_dist</span> <span class="o">=</span> <span class="n">FreqDist</span><span class="p">(</span><span class="n">cleaned_words</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">freq_dist</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">vote_choice_dict</span> <span class="o">=</span> <span class="n">clean_text_freq</span><span class="p">(</span><span class="n">vote_choice_str</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">vote_choice_dict</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>FreqDist({&#39;ppc&#39;: 66, &#39;undecided&#39;: 52, &#39;people&#39;: 41, &#39;canada&#39;: 39, &#39;sure&#39;: 27, &#39;vote&#39;: 20, &#39;pas&#39;: 20, &#39;parti&#39;: 19, &#39;je&#39;: 18, &#39;peoples&#39;: 18, ...})
</pre></div>
</div>
</div>
</div>
</section>
<section id="word-clouds">
<h2>Word clouds<a class="headerlink" href="#word-clouds" title="Link to this heading">#</a></h2>
<p>Word clouds are popular and can look very cool in a report. They can also be misleading if the size of the font does not correspond to the frequency of the word in the data, so you should use them with caution.</p>
<p>We’ll use the <a class="reference external" href="https://github.com/amueller/word_cloud/">Wordcloud</a> library, which we imported above. There are many options for how to do this. Here are two possibilities, changing the shape and the background colour. Check out the <a class="reference external" href="https://amueller.github.io/word_cloud/auto_examples/index.html#example-gallery">example gallery</a> for more.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># options</span>
<span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ogrid</span><span class="p">[:</span><span class="mi">300</span><span class="p">,</span> <span class="p">:</span><span class="mi">300</span><span class="p">]</span>

<span class="n">mask</span> <span class="o">=</span> <span class="p">(</span><span class="n">x</span> <span class="o">-</span> <span class="mi">150</span><span class="p">)</span> <span class="o">**</span> <span class="mi">2</span> <span class="o">+</span> <span class="p">(</span><span class="n">y</span> <span class="o">-</span> <span class="mi">150</span><span class="p">)</span> <span class="o">**</span> <span class="mi">2</span> <span class="o">&gt;</span> <span class="mi">130</span> <span class="o">**</span> <span class="mi">2</span>
<span class="n">mask</span> <span class="o">=</span> <span class="mi">255</span> <span class="o">*</span> <span class="n">mask</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>

<span class="c1"># this actually generates the word cloud</span>
<span class="n">wc</span> <span class="o">=</span> <span class="n">WordCloud</span><span class="p">(</span><span class="n">background_color</span><span class="o">=</span><span class="s2">&quot;white&quot;</span><span class="p">,</span> <span class="n">repeat</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">mask</span><span class="o">=</span><span class="n">mask</span><span class="p">)</span>
<span class="n">wc</span><span class="o">.</span><span class="n">generate</span><span class="p">(</span><span class="n">vote_choice_clean</span><span class="p">)</span>

<span class="c1"># and this displays it</span>
<span class="n">plt</span><span class="o">.</span><span class="n">axis</span><span class="p">(</span><span class="s2">&quot;off&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">wc</span><span class="p">,</span> <span class="n">interpolation</span><span class="o">=</span><span class="s2">&quot;bilinear&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/af3002a25f98d3bc1e350c458bbc17e470d7920eb5696dd854abd8b65c6de2f0.png" src="_images/af3002a25f98d3bc1e350c458bbc17e470d7920eb5696dd854abd8b65c6de2f0.png" />
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">wordcloud</span> <span class="o">=</span> <span class="n">WordCloud</span><span class="p">()</span><span class="o">.</span><span class="n">generate</span><span class="p">(</span><span class="n">vote_choice_clean</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">wordcloud</span><span class="p">,</span> <span class="n">interpolation</span><span class="o">=</span><span class="s1">&#39;bilinear&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">axis</span><span class="p">(</span><span class="s2">&quot;off&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span><span class="c1">#</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/1423d0e2455de96aecc22c693f8a70758fb14aa59eb93d02f73c3b4d4e44dafa.png" src="_images/1423d0e2455de96aecc22c693f8a70758fb14aa59eb93d02f73c3b4d4e44dafa.png" />
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">#bigger</span>
<span class="n">wordcloud</span> <span class="o">=</span> <span class="n">WordCloud</span><span class="p">()</span><span class="o">.</span><span class="n">generate</span><span class="p">(</span><span class="n">vote_choice_clean</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">5</span><span class="p">))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">wordcloud</span><span class="p">,</span> <span class="n">interpolation</span><span class="o">=</span><span class="s1">&#39;bilinear&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">axis</span><span class="p">(</span><span class="s1">&#39;off&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/417aa6cbcaf0d7620218cd3c15546df5d162410d3e0f246198dd228f387e167e.png" src="_images/417aa6cbcaf0d7620218cd3c15546df5d162410d3e0f246198dd228f387e167e.png" />
</div>
</div>
</section>
<section id="with-the-frequency-dictionary">
<h2>With the frequency dictionary<a class="headerlink" href="#with-the-frequency-dictionary" title="Link to this heading">#</a></h2>
<p>Recall that above we created a dictionary of the frequency of each word. We can use it to display relative to frequency.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">wordcloud</span> <span class="o">=</span> <span class="n">WordCloud</span><span class="p">()</span><span class="o">.</span><span class="n">generate_from_frequencies</span><span class="p">(</span><span class="n">vote_choice_dict</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">5</span><span class="p">))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">wordcloud</span><span class="p">,</span> <span class="n">interpolation</span><span class="o">=</span><span class="s1">&#39;bilinear&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">axis</span><span class="p">(</span><span class="s1">&#39;off&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/8449175b78b4f40c548f4dcf9045b9cc138a636593c3daadb093afa9ec90086e.png" src="_images/8449175b78b4f40c548f4dcf9045b9cc138a636593c3daadb093afa9ec90086e.png" />
</div>
</div>
</section>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="named-entities">
<h1>Named entities<a class="headerlink" href="#named-entities" title="Link to this heading">#</a></h1>
<p>Another thing you may want to do with survey results is extract the named entities mentioned in the text. Remember that we can do this with spaCy (see Week6).</p>
<p>We will use the variable <code class="docutils literal notranslate"><span class="pre">vote_choice_str</span></code> from earlier, which is simply the running text of the column about vote choice. We process it with spaCy (which was imported at the top) and we can print the entities that are of type ‘ORG’, which should correspond to a political party.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">vote_choice_doc</span> <span class="o">=</span> <span class="n">nlp</span><span class="p">(</span><span class="n">vote_choice_str</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">vote_choice_str</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&#39;Any but Liberals or NDP, NDP, Je ne sais pas., PPC, PPC, Ontario Party, Parti populaire du Canada, Peoples Party of Canada, wildrose, PEOPLE\&#39;S PARTY OF CANADA, Undecided, People\&#39;s party, I honestly dont know, Indécision, Uncertain, Undecided, A Party that I prefer, cancel my vote, Don\&#39;t vote party, vote the candidate, People\&#39;s Party of Canada, Maverick, PPC, aucun, Peoples Party of Canada, They are all the same, People’s Party of Canada, Undecided, Peoples, I dont disclose my voting preference, undecided, Don\&#39;t know, NOT SURE, Who are the candidates in my riding, No idea, PPC, PPC, Parti populaire du Canada, Undecided, PPC, PPC, PPC, western sepratist, Ppc, Libertarian, Not sure, People\&#39;s party, PPC, caq, undecided, Annulation, I, Undecided, People\&#39;s Party of Canada, PPC, Peoples’ Party of Canada, Undecided, Je ne sais pas, Je ne sais pas, CPP, Not Sure, unsure, None of the above, I don’t know, We\&#39;ll see, New Blue, ppc, Parti Populaire du Canada, undecided, Independent, People\&#39;s Party, PPC, M, I am undecided, PPC, Ppc, NOT SIRE, ne sais pas, I\&#39;m not sure!!, Maveric, Independent, Indécise, Undecided, People\&#39;s Party of Canada, all parties suck, Parti Populaire du Canada, partie populaire, Québec solidaire, Undecided, Peoples Party of Canada, Undecided, PPC, People’s Party of Canada, Where is none of the above, annuler mon vote, Maverick, No decision, Unsure, undecided, Maverick, Je n\&#39;arrive pas à me décider, Not sure, Coalition avenir Québec, Ppc, Anything that would support removal restrictions, Undecided, PPC, Maverick, Don\&#39;t know, don\&#39;t know, Ye, Je ne sais pas, PPC, undecided, Undecided, Npd, Rhinocéros, Not sure, Blanc, don\&#39;t know, Undecided, People\&#39;s Party, protest vote, Maverick, PPC, undecided, Undecided, Not sure, Parti Rhinocéros, UFF, I will not answer this question, but it wouldn\&#39;t be the &quot;main 4&quot;, People\&#39;s Party of Canada, NIL, PPC, Unsure, Parti populaire Canada ou Conservateur, undecided, Blue Party, NPD, I really don\&#39;t know, Communist Party, UNDECIDED, Unsure, Ppc, Not sure, Maverick Party, Parti Populaire du Canada, People\&#39;s Party, I do not know, Je sais pas, NONE, Independent, PPC, caq, The Wayne Foundation, peoples oarty, PEOPLES PARTY, People\&#39;s party, Ne sais pas, Indépendant, People\&#39;s Party of Canada, unknown, Rhinocéros, independent, No confidence, not sure, PPC, People\&#39;s Party of Canada, Je ne sais pas, Rhinoceros Party, Je garde cette info confidentiel, Parti populaire du Canada, undecided, PPC, PPC, Parti populaire (PPC), Peoples party, PPC, buffalo, Independent, I am not sure, People\&#39;s Party, Noyb, unknown, PPC, a venir, Bernier, PPC, Unsure, UNDECIDED, Ppc, People\&#39;s Party, PPC, People\&#39;s Party of Canada, Peoples Party, Ontario, Undecided, People\&#39;s Party, People party, PPC, Peoples party, Any other party, Caq, Undecided, Not sure, Undecided, Ontario party, new blue party, Undecided, PPC, Peoples Party, none of the above, Undecided, Ppc, undecided, Je ne sais pas encore, Unsure, People\&#39;s party, ppc, Indecis, PPC, Don\&#39;t know, Peoples Party, PPC, not liberal, people\&#39;s party, ppc, I don\&#39;t vote for a party. I vote for a person., ,, CAQ, one for disability ppl, I would spoil my ballot, Ppc, Undecided, People party, Parti popuaire, free party canada, PPC, still deciding, Am unsure at this time; lean to Conservative, I don’t know, PPC, Libertarian Party of Canada, PPC, People\&#39;s Party of Canada, I am undecided, People\&#39;s Party, Separatist, Coalition Avenir Quebec, People’s party, Partie populaire du Canada, MAVERICK, UNDECIDED, Do not kow, Vote blanc comptabilisé, Undecided, Ontario party, Unsure, unsure, Independent candidate, ne sais pas, Je ses pas, NOT SURE, I’m not sure, I will vote for Anyone other than liberal, undecided, je devrais m\&#39;informer avant de choisir mon vote, I am not sure at this time?, Libertarian, I don’t know, Ne sait pas encore, Undecided, I honestly dont know, Not sure, Peoples Party Canada, People\&#39;s Party, Bloc Québécois, not sure who i would vote for, Npd, PPC, People\&#39;s Party of Canada, Undecided, People\&#39;s Party of Canada, Any Western separatist party, PPC, Anyone other than Liberals they are severely screwing Canada over, dont know, don\&#39;t know who I would vote for, indécis, aucun de ces partis, undecided, Je ne sais pas?, People Party of Canada, je ne sais pas pour lequel des partis je serais tenter de plus voter  puisque je n\&#39;ai pas pris connaissance des plateformes électorales/projets/intentions/positions de chacun des partis pour être en mesure de faire un choix éclairé, I vote for the best local candidate, Parti nul, NDP, PPC, People\&#39;s Party, UNSURE, indécis, CAQ, PEOPLE\&#39;S PARTY, UNSURE, PPC, I\&#39;m not sure, I would need to do more reading as to what each party is offering., Peoples Party Canada, Not sure, I\&#39;m undecided, PPC, autre, people\&#39;s party, I vote based on the quality of the individual candidates rather than political party affiliation, PPC, PPC, don\&#39;t know, undecided, Peoples Party of Canada, People\&#39;s Party of Canada, Un parti plus intelligent et à date ils en existe pas, Communist, People\&#39;s party of canada, j\&#39;annulerais mon vote, Je ne sais pas encore, Ppc, Vote blanc, Aucune idée tous des menteurs, independant, Don\&#39;t know yet, Peoples Party, not sure, CPC, Not sure, PPC, Maverick party, Parti populaire du Canada, Unsure, PPC, PPC, Undecided, Still not sure, PPC, The pig party, libertarian, ne sais pas encore, Québec solidaire, idk, I\&#39;m not sure yet, Peoples Party, unsure, Independent, Seriously undecided, Parti Populaire du Canada, Maverick Party, don\&#39;t know Unsure, Not sure yet, People\&#39;s Party of Canada, PPC, PPC, Maverick, Not sure yet, J\&#39;annule mon vote, Christian heritage party, PPC, Coak, People\&#39;s Party, Maverick Party, Ppc, Don’t know, not sure, Unsure at this time, Undecided, Do not n, Annuler mon vote, parti populaire du Canada (PPC), Undecided, need to see platform, je sais pas, People, undecided, indecis, Npd, UNDECIDED, PPC, PPC, Undecided, People\&#39;s Party, undecided, Utterly disappointed in all political parties and am not sure if and for whom I will vote, ??????, I voted conservative in the past but now they are a joke, TrueBlue, People’s party, Communist Party, Indécise, pcc, Parti populaire, let unvaccinated canadians fly, Unsure, Undecided, I will spoil my ballot, Unsure, Undecided, PPC, parti populaire, Annuleraus mon vote, Parti populaire, PPC, People\&#39;s Party of Canada, indécise, Still undecided, Parti populaire, Je ne le sais pas, not sure, unsure, CPP, undecided, PPC, The Peoples party, PPC, Refuse de répondre&#39;
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># print all entities and their label</span>
<span class="c1"># note that there are errors here</span>

<span class="k">for</span> <span class="n">ent</span> <span class="ow">in</span> <span class="n">vote_choice_doc</span><span class="o">.</span><span class="n">ents</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">ent</span><span class="o">.</span><span class="n">text</span><span class="p">,</span> <span class="n">ent</span><span class="o">.</span><span class="n">label_</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Liberals NORP
NDP ORG
NDP ORG
Je ne sais pas. PERSON
PPC ORG
PPC ORG
Ontario Party ORG
Parti ORG
Canada GPE
Peoples Party of Canada ORG
PEOPLE&#39;S PARTY OF CANADA ORG
Undecided ORG
People&#39;s ORG
Indécision ORG
Undecided ORG
Party ORG
People&#39;s Party of Canada ORG
Maverick GPE
PPC ORG
aucun, ORG
Peoples Party of Canada ORG
People’s Party of Canada ORG
Undecided, Peoples ORG
PPC ORG
PPC ORG
Parti ORG
Canada GPE
Undecided ORG
PPC ORG
PPC ORG
PPC ORG
People&#39;s party ORG
PPC ORG
Undecided ORG
People&#39;s Party of Canada ORG
PPC ORG
Peoples’ Party of Canada ORG
Undecided ORG
Je ne sais pas PERSON
Je ne sais pas ORG
CPP ORG
New Blue GPE
Parti Populaire du Canada ORG
Independent ORG
People&#39;s Party ORG
PPC ORG
PPC ORG
sais pas ORG
Maveric, Independent ORG
Indécise ORG
Undecided ORG
People&#39;s Party of Canada ORG
Parti Populaire du Canada ORG
Québec ORG
Undecided, Peoples Party of Canada ORG
Undecided ORG
PPC ORG
People’s Party of Canada ORG
Maverick GPE
Unsure ORG
Maverick GPE
Je n&#39;arrive ORG
Québec, Ppc ORG
Undecided ORG
PPC ORG
Maverick GPE
Ye GPE
Je ne sais pas PERSON
PPC ORG
Undecided ORG
Npd GPE
Rhinocéros ORG
Blanc PERSON
Undecided ORG
People&#39;s Party ORG
Maverick GPE
PPC ORG
Undecided ORG
Parti Rhinocéros PERSON
UFF ORG
4 CARDINAL
People&#39;s Party of Canada ORG
NIL ORG
PPC ORG
Unsure ORG
Parti ORG
Canada GPE
Conservateur ORG
Blue Party ORG
NPD ORG
Communist Party ORG
UNDECIDED ORG
Unsure ORG
Maverick Party ORG
Parti Populaire du Canada ORG
People&#39;s Party ORG
Je sais pas PERSON
NONE ORG
Independent ORG
PPC ORG
The Wayne Foundation ORG
PEOPLES PARTY ORG
People&#39;s ORG
Ne ORG
Indépendant, People&#39;s Party of Canada ORG
Rhinocéros ORG
PPC ORG
People&#39;s Party of Canada ORG
Je ne sais pas ORG
Rhinoceros Party ORG
Je garde cette info PERSON
Parti ORG
Canada GPE
PPC ORG
PPC ORG
Parti ORG
PPC ORG
PPC ORG
Independent ORG
People&#39;s Party ORG
Noyb PERSON
PPC ORG
Bernier ORG
PPC ORG
Unsure ORG
UNDECIDED ORG
People&#39;s Party ORG
PPC ORG
People&#39;s Party of Canada ORG
Peoples Party ORG
Ontario GPE
Undecided ORG
People&#39;s Party ORG
PPC ORG
Peoples ORG
Undecided ORG
Undecided ORG
Ontario GPE
Undecided ORG
PPC ORG
Peoples Party ORG
Undecided, Ppc ORG
Je ne sais pas encore ORG
Unsure ORG
People&#39;s ORG
Indecis GPE
PPC ORG
Peoples Party ORG
PPC ORG
CAQ ORG
Undecided ORG
Parti ORG
free party canada ORG
PPC ORG
Conservative ORG
PPC ORG
Libertarian Party of Canada ORG
PPC ORG
People&#39;s Party of Canada ORG
People&#39;s Party ORG
Separatist NORP
Coalition Avenir Quebec PERSON
People’s ORG
Partie ORG
Canada GPE
UNDECIDED ORG
Undecided ORG
Ontario GPE
Unsure ORG
Independent ORG
ne sais pas ORG
Je PERSON
je devrais m&#39;informer PERSON
de choisir mon vote PERSON
Undecided ORG
Peoples Party Canada ORG
People&#39;s Party ORG
Bloc Québécois GPE
Npd ORG
PPC ORG
People&#39;s Party of Canada ORG
Undecided ORG
People&#39;s Party of Canada ORG
Western NORP
PPC ORG
Liberals NORP
Canada GPE
indécis PERSON
aucun de ces partis PERSON
Je ne sais pas? ORG
People Party of Canada ORG
ne sais pas pour lequel des partis ORG
serais tenter de plus ORG
n&#39;ai pas pris connaissance des plateformes ORG
un ORG
Parti ORG
NDP ORG
PPC ORG
People&#39;s Party ORG
UNSURE ORG
CAQ ORG
PEOPLE&#39;S PARTY ORG
UNSURE ORG
PPC ORG
Peoples Party Canada ORG
PPC ORG
PPC ORG
PPC ORG
Peoples Party of Canada ORG
People&#39;s Party of Canada ORG
Un ORG
Communist NORP
People&#39;s party of canada ORG
j&#39;annulerais mon vote PERSON
Je ne sais pas encore ORG
Ppc, Vote blanc ORG
Aucune ORG
Peoples Party ORG
CPC ORG
PPC ORG
Maverick GPE
Parti ORG
Canada GPE
Unsure ORG
PPC ORG
PPC ORG
Undecided ORG
PPC ORG
ne sais pas encore ORG
Québec ORG
Peoples Party ORG
Independent ORG
Parti Populaire du Canada ORG
Maverick Party ORG
Unsure ORG
People&#39;s Party of Canada ORG
PPC ORG
PPC ORG
Maverick GPE
Christian NORP
PPC ORG
Coak ORG
People&#39;s Party ORG
Maverick Party ORG
Unsure ORG
Undecided ORG
Annuler ORG
Canada GPE
PPC ORG
Undecided ORG
je sais pas PERSON
indecis GPE
Npd ORG
UNDECIDED ORG
PPC ORG
PPC ORG
Undecided ORG
People&#39;s Party ORG
TrueBlue ORG
People’s ORG
Communist Party ORG
Indécise ORG
Parti ORG
Unsure ORG
Undecided ORG
Unsure ORG
Undecided ORG
PPC ORG
Annuleraus ORG
Parti ORG
PPC ORG
People&#39;s Party of Canada ORG
Parti ORG
Je ne le sais pas PERSON
CPP ORG
PPC ORG
PPC ORG
Refuse de répondre ORG
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># print the ORG entities</span>

<span class="k">for</span> <span class="n">ent</span> <span class="ow">in</span> <span class="n">vote_choice_doc</span><span class="o">.</span><span class="n">ents</span><span class="p">:</span>
    <span class="k">if</span> <span class="n">ent</span><span class="o">.</span><span class="n">label_</span> <span class="o">==</span> <span class="s2">&quot;ORG&quot;</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">ent</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>NDP
NDP
PPC
PPC
Ontario Party
Parti
Peoples Party of Canada
PEOPLE&#39;S PARTY OF CANADA
Undecided
People&#39;s
Indécision
Undecided
Party
People&#39;s Party of Canada
PPC
aucun,
Peoples Party of Canada
People’s Party of Canada
Undecided, Peoples
PPC
PPC
Parti
Undecided
PPC
PPC
PPC
People&#39;s party
PPC
Undecided
People&#39;s Party of Canada
PPC
Peoples’ Party of Canada
Undecided
Je ne sais pas
CPP
Parti Populaire du Canada
Independent
People&#39;s Party
PPC
PPC
sais pas
Maveric, Independent
Indécise
Undecided
People&#39;s Party of Canada
Parti Populaire du Canada
Québec
Undecided, Peoples Party of Canada
Undecided
PPC
People’s Party of Canada
Unsure
Je n&#39;arrive
Québec, Ppc
Undecided
PPC
PPC
Undecided
Rhinocéros
Undecided
People&#39;s Party
PPC
Undecided
UFF
People&#39;s Party of Canada
NIL
PPC
Unsure
Parti
Conservateur
Blue Party
NPD
Communist Party
UNDECIDED
Unsure
Maverick Party
Parti Populaire du Canada
People&#39;s Party
NONE
Independent
PPC
The Wayne Foundation
PEOPLES PARTY
People&#39;s
Ne
Indépendant, People&#39;s Party of Canada
Rhinocéros
PPC
People&#39;s Party of Canada
Je ne sais pas
Rhinoceros Party
Parti
PPC
PPC
Parti
PPC
PPC
Independent
People&#39;s Party
PPC
Bernier
PPC
Unsure
UNDECIDED
People&#39;s Party
PPC
People&#39;s Party of Canada
Peoples Party
Undecided
People&#39;s Party
PPC
Peoples
Undecided
Undecided
Undecided
PPC
Peoples Party
Undecided, Ppc
Je ne sais pas encore
Unsure
People&#39;s
PPC
Peoples Party
PPC
CAQ
Undecided
Parti
free party canada
PPC
Conservative
PPC
Libertarian Party of Canada
PPC
People&#39;s Party of Canada
People&#39;s Party
People’s
Partie
UNDECIDED
Undecided
Unsure
Independent
ne sais pas
Undecided
Peoples Party Canada
People&#39;s Party
Npd
PPC
People&#39;s Party of Canada
Undecided
People&#39;s Party of Canada
PPC
Je ne sais pas?
People Party of Canada
ne sais pas pour lequel des partis
serais tenter de plus
n&#39;ai pas pris connaissance des plateformes
un
Parti
NDP
PPC
People&#39;s Party
UNSURE
CAQ
PEOPLE&#39;S PARTY
UNSURE
PPC
Peoples Party Canada
PPC
PPC
PPC
Peoples Party of Canada
People&#39;s Party of Canada
Un
People&#39;s party of canada
Je ne sais pas encore
Ppc, Vote blanc
Aucune
Peoples Party
CPC
PPC
Parti
Unsure
PPC
PPC
Undecided
PPC
ne sais pas encore
Québec
Peoples Party
Independent
Parti Populaire du Canada
Maverick Party
Unsure
People&#39;s Party of Canada
PPC
PPC
PPC
Coak
People&#39;s Party
Maverick Party
Unsure
Undecided
Annuler
PPC
Undecided
Npd
UNDECIDED
PPC
PPC
Undecided
People&#39;s Party
TrueBlue
People’s
Communist Party
Indécise
Parti
Unsure
Undecided
Unsure
Undecided
PPC
Annuleraus
Parti
PPC
People&#39;s Party of Canada
Parti
CPP
PPC
PPC
Refuse de répondre
</pre></div>
</div>
</div>
</div>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="redacting-documents">
<h1>Redacting documents<a class="headerlink" href="#redacting-documents" title="Link to this heading">#</a></h1>
<p>This idea comes from an <a class="reference external" href="https://github.com/Jcharis/Natural-Language-Processing-Tutorials/blob/master/NLP_with_SpaCy/Automatic%20Redaction%20%20%26%20Sanitization%20of%20Document%20Using%20Spacy%20NER.ipynb">NLP notebook on redacting names</a>. Once you have named entities identified (hopefully accurately), you can also use the NER output to redact any personal information. For instance, you can identify all the person’s names and remove them or replace them with something like ‘REDACTED’.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">sanitize_names</span><span class="p">(</span><span class="n">text</span><span class="p">):</span>
    <span class="n">doc</span> <span class="o">=</span> <span class="n">nlp</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>
    <span class="n">redacted_sentences</span> <span class="o">=</span> <span class="p">[]</span>
    
    <span class="k">for</span> <span class="n">token</span> <span class="ow">in</span> <span class="n">doc</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">token</span><span class="o">.</span><span class="n">ent_type_</span> <span class="o">==</span> <span class="s1">&#39;PERSON&#39;</span><span class="p">:</span>
            <span class="n">redacted_sentences</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;[REDACTED]&quot;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">redacted_sentences</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">token</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
    
    <span class="k">return</span> <span class="s1">&#39; &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">redacted_sentences</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">vote_choice_redacted</span> <span class="o">=</span> <span class="n">sanitize_names</span><span class="p">(</span><span class="n">vote_choice_str</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">vote_choice_redacted</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&#39;Any but Liberals or NDP , NDP , [REDACTED] [REDACTED] [REDACTED] [REDACTED] [REDACTED] , PPC , PPC , Ontario Party , Parti populaire du Canada , Peoples Party of Canada , wildrose , PEOPLE \&#39;S PARTY OF CANADA , Undecided , People \&#39;s party , I honestly do nt know , Indécision , Uncertain , Undecided , A Party that I prefer , cancel my vote , Do n\&#39;t vote party , vote the candidate , People \&#39;s Party of Canada , Maverick , PPC , aucun , Peoples Party of Canada , They are all the same , People ’s Party of Canada , Undecided , Peoples , I do nt disclose my voting preference , undecided , Do n\&#39;t know , NOT SURE , Who are the candidates in my riding , No idea , PPC , PPC , Parti populaire du Canada , Undecided , PPC , PPC , PPC , western sepratist , Ppc , Libertarian , Not sure , People \&#39;s party , PPC , caq , undecided , Annulation , I , Undecided , People \&#39;s Party of Canada , PPC , Peoples ’ Party of Canada , Undecided , [REDACTED] [REDACTED] [REDACTED] [REDACTED] , Je ne sais pas , CPP , Not Sure , unsure , None of the above , I do n’t know , We \&#39;ll see , New Blue , ppc , Parti Populaire du Canada , undecided , Independent , People \&#39;s Party , PPC , M , I am undecided , PPC , Ppc , NOT SIRE , ne sais pas , I \&#39;m not sure ! ! , Maveric , Independent , Indécise , Undecided , People \&#39;s Party of Canada , all parties suck , Parti Populaire du Canada , partie populaire , Québec solidaire , Undecided , Peoples Party of Canada , Undecided , PPC , People ’s Party of Canada , Where is none of the above , annuler mon vote , Maverick , No decision , Unsure , undecided , Maverick , Je n\&#39;arrive pas à me décider , Not sure , Coalition avenir Québec , Ppc , Anything that would support removal restrictions , Undecided , PPC , Maverick , Do n\&#39;t know , do n\&#39;t know , Ye , [REDACTED] [REDACTED] [REDACTED] [REDACTED] , PPC , undecided , Undecided , Npd , Rhinocéros , Not sure , [REDACTED] , do n\&#39;t know , Undecided , People \&#39;s Party , protest vote , Maverick , PPC , undecided , Undecided , Not sure , [REDACTED] [REDACTED] , UFF , I will not answer this question , but it would n\&#39;t be the &quot; main 4 &quot; , People \&#39;s Party of Canada , NIL , PPC , Unsure , Parti populaire Canada ou Conservateur , undecided , Blue Party , NPD , I really do n\&#39;t know , Communist Party , UNDECIDED , Unsure , Ppc , Not sure , Maverick Party , Parti Populaire du Canada , People \&#39;s Party , I do not know , [REDACTED] [REDACTED] [REDACTED] , NONE , Independent , PPC , caq , The Wayne Foundation , peoples oarty , PEOPLES PARTY , People \&#39;s party , Ne sais pas , Indépendant , People \&#39;s Party of Canada , unknown , Rhinocéros , independent , No confidence , not sure , PPC , People \&#39;s Party of Canada , Je ne sais pas , Rhinoceros Party , [REDACTED] [REDACTED] [REDACTED] [REDACTED] confidentiel , Parti populaire du Canada , undecided , PPC , PPC , Parti populaire ( PPC ) , Peoples party , PPC , buffalo , Independent , I am not sure , People \&#39;s Party , [REDACTED] , unknown , PPC , a venir , Bernier , PPC , Unsure , UNDECIDED , Ppc , People \&#39;s Party , PPC , People \&#39;s Party of Canada , Peoples Party , Ontario , Undecided , People \&#39;s Party , People party , PPC , Peoples party , Any other party , Caq , Undecided , Not sure , Undecided , Ontario party , new blue party , Undecided , PPC , Peoples Party , none of the above , Undecided , Ppc , undecided , Je ne sais pas encore , Unsure , People \&#39;s party , ppc , Indecis , PPC , Do n\&#39;t know , Peoples Party , PPC , not liberal , people \&#39;s party , ppc , I do n\&#39;t vote for a party . I vote for a person . , , , CAQ , one for disability ppl , I would spoil my ballot , Ppc , Undecided , People party , Parti popuaire , free party canada , PPC , still deciding , Am unsure at this time ; lean to Conservative , I do n’t know , PPC , Libertarian Party of Canada , PPC , People \&#39;s Party of Canada , I am undecided , People \&#39;s Party , Separatist , [REDACTED] [REDACTED] [REDACTED] , People ’s party , Partie populaire du Canada , MAVERICK , UNDECIDED , Do not kow , Vote blanc comptabilisé , Undecided , Ontario party , Unsure , unsure , Independent candidate , ne sais pas , [REDACTED] ses pas , NOT SURE , I ’m not sure , I will vote for Anyone other than liberal , undecided , [REDACTED] [REDACTED] [REDACTED] avant [REDACTED] [REDACTED] [REDACTED] [REDACTED] , I am not sure at this time ? , Libertarian , I do n’t know , Ne sait pas encore , Undecided , I honestly do nt know , Not sure , Peoples Party Canada , People \&#39;s Party , Bloc Québécois , not sure who i would vote for , Npd , PPC , People \&#39;s Party of Canada , Undecided , People \&#39;s Party of Canada , Any Western separatist party , PPC , Anyone other than Liberals they are severely screwing Canada over , do nt know , do n\&#39;t know who I would vote for , [REDACTED] , [REDACTED] [REDACTED] [REDACTED] [REDACTED] , undecided , Je ne sais pas ? , People Party of Canada , je ne sais pas pour lequel des partis je serais tenter de plus voter   puisque je n\&#39;ai pas pris connaissance des plateformes électorales / projets / intentions / positions de chacun des partis pour être en mesure de faire un choix éclairé , I vote for the best local candidate , Parti nul , NDP , PPC , People \&#39;s Party , UNSURE , indécis , CAQ , PEOPLE \&#39;S PARTY , UNSURE , PPC , I \&#39;m not sure , I would need to do more reading as to what each party is offering . , Peoples Party Canada , Not sure , I \&#39;m undecided , PPC , autre , people \&#39;s party , I vote based on the quality of the individual candidates rather than political party affiliation , PPC , PPC , do n\&#39;t know , undecided , Peoples Party of Canada , People \&#39;s Party of Canada , Un parti plus intelligent et à date ils en existe pas , Communist , People \&#39;s party of canada , [REDACTED] [REDACTED] [REDACTED] , Je ne sais pas encore , Ppc , Vote blanc , Aucune idée tous des menteurs , independant , Do n\&#39;t know yet , Peoples Party , not sure , CPC , Not sure , PPC , Maverick party , Parti populaire du Canada , Unsure , PPC , PPC , Undecided , Still not sure , PPC , The pig party , libertarian , ne sais pas encore , Québec solidaire , idk , I \&#39;m not sure yet , Peoples Party , unsure , Independent , Seriously undecided , Parti Populaire du Canada , Maverick Party , do n\&#39;t know Unsure , Not sure yet , People \&#39;s Party of Canada , PPC , PPC , Maverick , Not sure yet , J\&#39;annule mon vote , Christian heritage party , PPC , Coak , People \&#39;s Party , Maverick Party , Ppc , Do n’t know , not sure , Unsure at this time , Undecided , Do not n , Annuler mon vote , parti populaire du Canada ( PPC ) , Undecided , need to see platform , [REDACTED] [REDACTED] [REDACTED] , People , undecided , indecis , Npd , UNDECIDED , PPC , PPC , Undecided , People \&#39;s Party , undecided , Utterly disappointed in all political parties and am not sure if and for whom I will vote , ? ? ? ? ? ? , I voted conservative in the past but now they are a joke , TrueBlue , People ’s party , Communist Party , Indécise , pcc , Parti populaire , let unvaccinated canadians fly , Unsure , Undecided , I will spoil my ballot , Unsure , Undecided , PPC , parti populaire , Annuleraus mon vote , Parti populaire , PPC , People \&#39;s Party of Canada , indécise , Still undecided , Parti populaire , [REDACTED] [REDACTED] [REDACTED] [REDACTED] [REDACTED] , not sure , unsure , CPP , undecided , PPC , The Peoples party , PPC , Refuse de répondre&#39;
</pre></div>
</div>
</div>
</div>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="summary">
<h1>Summary<a class="headerlink" href="#summary" title="Link to this heading">#</a></h1>
<p>We have learned about processing and aggregating survey data. This notebook has used some concepts we have learned previously:</p>
<ul class="simple">
<li><p>Tokenization</p></li>
<li><p>Lowercasing</p></li>
<li><p>Removing stopwords</p></li>
<li><p>Creating a function to clean text</p></li>
<li><p>Reading in and manipulating data in pandas</p></li>
</ul>
<p>New information:</p>
<ul class="simple">
<li><p>Creating word clouds</p></li>
<li><p>Using NER (named entity recognition) to redact documents</p></li>
</ul>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./."
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="Week_10.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Ling 380 - Week 10</p>
      </div>
    </a>
    <a class="right-next"
       href="Week_12.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Ling 380 - Week 12</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#">Ling 380 - Week 11</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#processing-survey-data">Processing survey data</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#data">Data</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#import-statements">Import statements</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#import-and-examine-the-data">Import and examine the data</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#working-with-one-column">Working with one column</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#get-frequencies">Get frequencies</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#word-clouds">Word clouds</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#with-the-frequency-dictionary">With the frequency dictionary</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#named-entities">Named entities</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#redacting-documents">Redacting documents</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#summary">Summary</a></li>
</ul>

  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By The Jupyter Book Community
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2023.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b"></script>
<script src="_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>