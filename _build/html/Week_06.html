
<!DOCTYPE html>


<html lang="en" data-content_root="./" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Ling 380 - Week 6 &#8212; My sample book</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="_static/styles/theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="_static/styles/bootstrap.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="_static/styles/pydata-sphinx-theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />

  
  <link href="_static/vendor/fontawesome/6.5.2/css/all.min.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=03e43079" />
    <link rel="stylesheet" type="text/css" href="_static/styles/sphinx-book-theme.css?v=eba8b062" />
    <link rel="stylesheet" type="text/css" href="_static/togglebutton.css?v=13237357" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="_static/mystnb.8ecb98da25f57f5357bf6f572d296f466b2cfe2517ffebfabe82451661e28f02.css?v=6644e6bb" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-thebe.css?v=4fa983c6" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-design.min.css?v=95c83b7e" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b" />
<link rel="preload" as="script" href="_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b" />
  <script src="_static/vendor/fontawesome/6.5.2/js/all.min.js?digest=dfe6caa3a7d634c4db9b"></script>

    <script src="_static/documentation_options.js?v=9eb32ce0"></script>
    <script src="_static/doctools.js?v=9a2dae69"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="_static/copybutton.js?v=f281be69"></script>
    <script src="_static/scripts/sphinx-book-theme.js?v=887ef09a"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="_static/togglebutton.js?v=4a39c7ea"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="_static/design-tabs.js?v=f930bc37"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script async="async" src="_static/sphinx-thebe.js?v=c100c467"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'Week_06';</script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-primary-sidebar-checkbox"/>
  <label class="overlay overlay-primary" for="pst-primary-sidebar-checkbox"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-secondary-sidebar-checkbox"/>
  <label class="overlay overlay-secondary" for="pst-secondary-sidebar-checkbox"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
        
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  
    
  

<a class="navbar-brand logo" href="intro.html">
  
  
  
  
  
    
    
      
    
    
    <img src="_static/logo.png" class="logo__image only-light" alt="My sample book - Home"/>
    <script>document.write(`<img src="_static/logo.png" class="logo__image only-dark" alt="My sample book - Home"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item">

 <script>
 document.write(`
   <button class="btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="intro.html">
                    Welcome to your Jupyter Book
                </a>
            </li>
        </ul>
        <ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="Week_01.html">Ling380 - Week 1</a></li>
<li class="toctree-l1"><a class="reference internal" href="Week_02.html">Ling380 - Week 2</a></li>
<li class="toctree-l1"><a class="reference internal" href="nltk_install.html">Installing NLTK</a></li>
<li class="toctree-l1"><a class="reference internal" href="spacy_install.html">Installing spaCy</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><button class="sidebar-toggle primary-toggle btn btn-sm" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</button></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/executablebooks/jupyter-book" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/executablebooks/jupyter-book/issues/new?title=Issue%20on%20page%20%2FWeek_06.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="_sources/Week_06.ipynb" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.ipynb</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="theme-switch fa-solid fa-sun fa-lg" data-mode="light"></i>
    <i class="theme-switch fa-solid fa-moon fa-lg" data-mode="dark"></i>
    <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"></i>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm pst-navbar-icon search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<button class="sidebar-toggle secondary-toggle btn btn-sm" title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</button>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Ling 380 - Week 6</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#">Ling 380 - Week 6</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#normalizing-data-named-entity-recognition">Normalizing data. Named entity recognition</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#normalizing-data">Normalizing data</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#tokenizing-without-lowercase">Tokenizing without lowercase</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#tokenizing-after-lowercasing">Tokenizing after lowercasing</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#stemming-and-lemmatizing-with-nltk">Stemming and lemmatizing with NLTK</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#stemming">Stemming</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#lemmatization">Lemmatization</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#other-options-remove-non-ascii-characters-remove-html-tags">Other options: remove non-ASCII characters, remove HTML tags</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#normalizing-text-with-spacy">Normalizing text with spaCy</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#using-pandas-to-show-the-output">Using pandas to show the output</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#named-entity-recognition">Named Entity Recognition</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#summary">Summary</a></li>
</ul>

            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="ling-380-week-6">
<h1>Ling 380 - Week 6<a class="headerlink" href="#ling-380-week-6" title="Link to this heading">#</a></h1>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="normalizing-data-named-entity-recognition">
<h1>Normalizing data. Named entity recognition<a class="headerlink" href="#normalizing-data-named-entity-recognition" title="Link to this heading">#</a></h1>
<p>We have by now learned the basics of working with python and with python data types. We have also learned to process files. We are moving to doing more interesting things with textual data. In this lesson, we will learn about cleaning and normalizing data and how to identify named entities.</p>
<p>We will continue to use NLTK, but we will also install another powerful Natural Language Processing package, spaCy. If you haven’t, go to the spacy_install.ipynb notebook and follow instructions there. Then come back here to import and use spaCy.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># optional: pandas for storing information into a dataframe</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">pandas</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pd</span>

<span class="c1"># we need to import NLTK every time we want to use it</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">nltk</span>

<span class="c1"># import the NLTK packages we know we need</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">nltk.tokenize</span><span class="w"> </span><span class="kn">import</span> <span class="n">word_tokenize</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">nltk.stem</span><span class="w"> </span><span class="kn">import</span> <span class="n">PorterStemmer</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">nltk.stem</span><span class="w"> </span><span class="kn">import</span> <span class="n">WordNetLemmatizer</span>

<span class="c1"># these 2 packages may already be in your system, but just in case</span>
<span class="n">nltk</span><span class="o">.</span><span class="n">download</span><span class="p">(</span><span class="s1">&#39;punkt&#39;</span><span class="p">)</span>
<span class="n">nltk</span><span class="o">.</span><span class="n">download</span><span class="p">(</span><span class="s1">&#39;wordnet&#39;</span><span class="p">)</span>

<span class="c1"># import spaCy and the small English language model</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">spacy</span>
<span class="n">nlp</span> <span class="o">=</span> <span class="n">spacy</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s2">&quot;en_core_web_sm&quot;</span><span class="p">)</span>

<span class="c1"># this does prettier displays on spaCy</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">spacy</span><span class="w"> </span><span class="kn">import</span> <span class="n">displacy</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[nltk_data] Downloading package punkt to
[nltk_data]     /Users/yifangyuan/nltk_data...
[nltk_data]   Package punkt is already up-to-date!
[nltk_data] Downloading package wordnet to
[nltk_data]     /Users/yifangyuan/nltk_data...
[nltk_data]   Package wordnet is already up-to-date!
</pre></div>
</div>
</div>
</div>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="normalizing-data">
<h1>Normalizing data<a class="headerlink" href="#normalizing-data" title="Link to this heading">#</a></h1>
<p>Normalizing refers to a set of processes to make data uniform. This is generally useful to count things the correct way and to get to the essence of the words in a text. Think of counting the instances of the word “the” in a text. You’ll want to make sure that “the”, “The”, and “the?” all look the same before you count them. Normalization includes:</p>
<ul class="simple">
<li><p>Converting all words to lowercase</p></li>
<li><p>Removing or separating punctuation</p></li>
<li><p>Stemming - removing endings and ending up with the <em>stem</em> (endings -&gt; end; went -&gt; went)</p></li>
<li><p>Lemmatizing - removing endings and ending up with the <em>root</em> (endings -&gt; end; went -&gt; go)</p></li>
</ul>
<p>Most NLP packages (NLTK, spaCy) have built-in methods to do this. But it’s also good to know how to do it yourself, in case you want to control what the output looks like.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># an excerpt from The Peak, https://the-peak.ca/2025/01/sfu-study-calls-for-utility-scale-solar-power-systems-in-canada/</span>
<span class="n">text1</span> <span class="o">=</span> <span class="s2">&quot;In December 2024, Clean Energy Research Group (CERG) published a paper calling for Canada to build “mass utility-scale solar mega projects,” according to an SFU news release. Utility-scale solar “refers to large solar installations designed to feed power directly onto the electric grid.” An electric grid is an “intricate system” that provides electricity “all the way from its generation to the customers that use it for their daily needs.”&quot;</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># a made-up text</span>
<span class="n">text2</span> <span class="o">=</span> <span class="s2">&quot;This gotta be the wéïrdest bit of text that&#39;s ne&#39;er gonna be The thing you&#39;ll encounter, but I have to give, gave, given, something!</span><span class="se">\r</span><span class="s2">, even the weirdest. Just tryna throw everything into a made-up bit that isn&#39;t making any sense.&lt;br&gt; And here&#39;s a sentence with the irregular plural feet and one with the irregular plural geese.&quot;</span>
</pre></div>
</div>
</div>
</div>
<section id="tokenizing-without-lowercase">
<h2>Tokenizing without lowercase<a class="headerlink" href="#tokenizing-without-lowercase" title="Link to this heading">#</a></h2>
<p>We will use NLTK to tokenize the texts. You can print the list of tokens, and also print the count of types and tokens. You’ll see that ‘And’ and ‘and’ count as two different types. But they are really the same word. That’s why we lowercase first or lowercase after tokenizing, but before counting. Compare this bit of code and the output to what happens if we lowercase.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">tokens1</span> <span class="o">=</span> <span class="n">nltk</span><span class="o">.</span><span class="n">word_tokenize</span><span class="p">(</span><span class="n">text1</span><span class="p">)</span>
<span class="n">n_tokens1</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">tokens1</span><span class="p">)</span>
<span class="n">n_types1</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">tokens1</span><span class="p">))</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">tokens1</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[&#39;In&#39;,
 &#39;December&#39;,
 &#39;2024&#39;,
 &#39;,&#39;,
 &#39;Clean&#39;,
 &#39;Energy&#39;,
 &#39;Research&#39;,
 &#39;Group&#39;,
 &#39;(&#39;,
 &#39;CERG&#39;,
 &#39;)&#39;,
 &#39;published&#39;,
 &#39;a&#39;,
 &#39;paper&#39;,
 &#39;calling&#39;,
 &#39;for&#39;,
 &#39;Canada&#39;,
 &#39;to&#39;,
 &#39;build&#39;,
 &#39;“&#39;,
 &#39;mass&#39;,
 &#39;utility-scale&#39;,
 &#39;solar&#39;,
 &#39;mega&#39;,
 &#39;projects&#39;,
 &#39;,&#39;,
 &#39;”&#39;,
 &#39;according&#39;,
 &#39;to&#39;,
 &#39;an&#39;,
 &#39;SFU&#39;,
 &#39;news&#39;,
 &#39;release&#39;,
 &#39;.&#39;,
 &#39;Utility-scale&#39;,
 &#39;solar&#39;,
 &#39;“&#39;,
 &#39;refers&#39;,
 &#39;to&#39;,
 &#39;large&#39;,
 &#39;solar&#39;,
 &#39;installations&#39;,
 &#39;designed&#39;,
 &#39;to&#39;,
 &#39;feed&#39;,
 &#39;power&#39;,
 &#39;directly&#39;,
 &#39;onto&#39;,
 &#39;the&#39;,
 &#39;electric&#39;,
 &#39;grid.&#39;,
 &#39;”&#39;,
 &#39;An&#39;,
 &#39;electric&#39;,
 &#39;grid&#39;,
 &#39;is&#39;,
 &#39;an&#39;,
 &#39;“&#39;,
 &#39;intricate&#39;,
 &#39;system&#39;,
 &#39;”&#39;,
 &#39;that&#39;,
 &#39;provides&#39;,
 &#39;electricity&#39;,
 &#39;“&#39;,
 &#39;all&#39;,
 &#39;the&#39;,
 &#39;way&#39;,
 &#39;from&#39;,
 &#39;its&#39;,
 &#39;generation&#39;,
 &#39;to&#39;,
 &#39;the&#39;,
 &#39;customers&#39;,
 &#39;that&#39;,
 &#39;use&#39;,
 &#39;it&#39;,
 &#39;for&#39;,
 &#39;their&#39;,
 &#39;daily&#39;,
 &#39;needs&#39;,
 &#39;.&#39;,
 &#39;”&#39;]
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="nb">set</span><span class="p">(</span><span class="n">tokens1</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>grid
electric
Canada
to
system
In
solar
calling
projects
Utility-scale
use
.
an
way
utility-scale
that
designed
a
the
its
Energy
“
installations
mega
provides
(
,
December
feed
for
all
grid.
Clean
mass
it
paper
CERG
Research
)
published
2024
power
intricate
from
generation
according
refers
An
release
”
is
build
Group
customers
SFU
large
onto
daily
their
news
directly
electricity
needs
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">n_tokens1</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">n_types1</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>83
63
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># same, but for text2</span>
<span class="n">tokens2</span> <span class="o">=</span> <span class="n">nltk</span><span class="o">.</span><span class="n">word_tokenize</span><span class="p">(</span><span class="n">text2</span><span class="p">)</span>
<span class="n">n_tokens2</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">tokens2</span><span class="p">)</span>
<span class="n">n_types2</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">tokens2</span><span class="p">))</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">tokens2</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[&#39;This&#39;,
 &#39;got&#39;,
 &#39;ta&#39;,
 &#39;be&#39;,
 &#39;the&#39;,
 &#39;wéïrdest&#39;,
 &#39;bit&#39;,
 &#39;of&#39;,
 &#39;text&#39;,
 &#39;that&#39;,
 &quot;&#39;s&quot;,
 &quot;ne&#39;er&quot;,
 &#39;gon&#39;,
 &#39;na&#39;,
 &#39;be&#39;,
 &#39;The&#39;,
 &#39;thing&#39;,
 &#39;you&#39;,
 &quot;&#39;ll&quot;,
 &#39;encounter&#39;,
 &#39;,&#39;,
 &#39;but&#39;,
 &#39;I&#39;,
 &#39;have&#39;,
 &#39;to&#39;,
 &#39;give&#39;,
 &#39;,&#39;,
 &#39;gave&#39;,
 &#39;,&#39;,
 &#39;given&#39;,
 &#39;,&#39;,
 &#39;something&#39;,
 &#39;!&#39;,
 &#39;,&#39;,
 &#39;even&#39;,
 &#39;the&#39;,
 &#39;weirdest&#39;,
 &#39;.&#39;,
 &#39;Just&#39;,
 &#39;tryna&#39;,
 &#39;throw&#39;,
 &#39;everything&#39;,
 &#39;into&#39;,
 &#39;a&#39;,
 &#39;made-up&#39;,
 &#39;bit&#39;,
 &#39;that&#39;,
 &#39;is&#39;,
 &quot;n&#39;t&quot;,
 &#39;making&#39;,
 &#39;any&#39;,
 &#39;sense.&#39;,
 &#39;&lt;&#39;,
 &#39;br&#39;,
 &#39;&gt;&#39;,
 &#39;And&#39;,
 &#39;here&#39;,
 &quot;&#39;s&quot;,
 &#39;a&#39;,
 &#39;sentence&#39;,
 &#39;with&#39;,
 &#39;the&#39;,
 &#39;irregular&#39;,
 &#39;plural&#39;,
 &#39;feet&#39;,
 &#39;and&#39;,
 &#39;one&#39;,
 &#39;with&#39;,
 &#39;the&#39;,
 &#39;irregular&#39;,
 &#39;plural&#39;,
 &#39;geese&#39;,
 &#39;.&#39;]
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="nb">set</span><span class="p">(</span><span class="n">tokens2</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>even
to
one
ta
you
&#39;ll
ne&#39;er
.
Just
The
weirdest
n&#39;t
have
making
given
br
with
the
but
something
text
a
This
gon
geese
irregular
,
and
throw
sense.
I
tryna
encounter
be
&gt;
here
bit
na
&lt;
&#39;s
sentence
everything
wéïrdest
!
gave
thing
made-up
any
feet
got
give
is
plural
of
And
that
into
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">n_tokens2</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">n_types2</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>73
57
</pre></div>
</div>
</div>
</div>
</section>
<section id="tokenizing-after-lowercasing">
<h2>Tokenizing after lowercasing<a class="headerlink" href="#tokenizing-after-lowercasing" title="Link to this heading">#</a></h2>
<p>Compare the numbers and the output now.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># just using the lower() method in a string</span>
<span class="n">tokens1_lower</span> <span class="o">=</span> <span class="p">[</span><span class="n">w</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="k">for</span> <span class="n">w</span> <span class="ow">in</span> <span class="n">tokens1</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">tokens1_lower</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[&#39;in&#39;,
 &#39;december&#39;,
 &#39;2024&#39;,
 &#39;,&#39;,
 &#39;clean&#39;,
 &#39;energy&#39;,
 &#39;research&#39;,
 &#39;group&#39;,
 &#39;(&#39;,
 &#39;cerg&#39;,
 &#39;)&#39;,
 &#39;published&#39;,
 &#39;a&#39;,
 &#39;paper&#39;,
 &#39;calling&#39;,
 &#39;for&#39;,
 &#39;canada&#39;,
 &#39;to&#39;,
 &#39;build&#39;,
 &#39;“&#39;,
 &#39;mass&#39;,
 &#39;utility-scale&#39;,
 &#39;solar&#39;,
 &#39;mega&#39;,
 &#39;projects&#39;,
 &#39;,&#39;,
 &#39;”&#39;,
 &#39;according&#39;,
 &#39;to&#39;,
 &#39;an&#39;,
 &#39;sfu&#39;,
 &#39;news&#39;,
 &#39;release&#39;,
 &#39;.&#39;,
 &#39;utility-scale&#39;,
 &#39;solar&#39;,
 &#39;“&#39;,
 &#39;refers&#39;,
 &#39;to&#39;,
 &#39;large&#39;,
 &#39;solar&#39;,
 &#39;installations&#39;,
 &#39;designed&#39;,
 &#39;to&#39;,
 &#39;feed&#39;,
 &#39;power&#39;,
 &#39;directly&#39;,
 &#39;onto&#39;,
 &#39;the&#39;,
 &#39;electric&#39;,
 &#39;grid.&#39;,
 &#39;”&#39;,
 &#39;an&#39;,
 &#39;electric&#39;,
 &#39;grid&#39;,
 &#39;is&#39;,
 &#39;an&#39;,
 &#39;“&#39;,
 &#39;intricate&#39;,
 &#39;system&#39;,
 &#39;”&#39;,
 &#39;that&#39;,
 &#39;provides&#39;,
 &#39;electricity&#39;,
 &#39;“&#39;,
 &#39;all&#39;,
 &#39;the&#39;,
 &#39;way&#39;,
 &#39;from&#39;,
 &#39;its&#39;,
 &#39;generation&#39;,
 &#39;to&#39;,
 &#39;the&#39;,
 &#39;customers&#39;,
 &#39;that&#39;,
 &#39;use&#39;,
 &#39;it&#39;,
 &#39;for&#39;,
 &#39;their&#39;,
 &#39;daily&#39;,
 &#39;needs&#39;,
 &#39;.&#39;,
 &#39;”&#39;]
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">n_types1_lower</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">tokens1_lower</span><span class="p">))</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">n_tokens1</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">n_types1</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">n_types1_lower</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>83
63
61
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># same for text 2</span>
<span class="n">tokens2_lower</span> <span class="o">=</span> <span class="p">[</span><span class="n">w</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="k">for</span> <span class="n">w</span> <span class="ow">in</span> <span class="n">tokens2</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">tokens2_lower</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[&#39;this&#39;,
 &#39;got&#39;,
 &#39;ta&#39;,
 &#39;be&#39;,
 &#39;the&#39;,
 &#39;wéïrdest&#39;,
 &#39;bit&#39;,
 &#39;of&#39;,
 &#39;text&#39;,
 &#39;that&#39;,
 &quot;&#39;s&quot;,
 &quot;ne&#39;er&quot;,
 &#39;gon&#39;,
 &#39;na&#39;,
 &#39;be&#39;,
 &#39;the&#39;,
 &#39;thing&#39;,
 &#39;you&#39;,
 &quot;&#39;ll&quot;,
 &#39;encounter&#39;,
 &#39;,&#39;,
 &#39;but&#39;,
 &#39;i&#39;,
 &#39;have&#39;,
 &#39;to&#39;,
 &#39;give&#39;,
 &#39;,&#39;,
 &#39;gave&#39;,
 &#39;,&#39;,
 &#39;given&#39;,
 &#39;,&#39;,
 &#39;something&#39;,
 &#39;!&#39;,
 &#39;,&#39;,
 &#39;even&#39;,
 &#39;the&#39;,
 &#39;weirdest&#39;,
 &#39;.&#39;,
 &#39;just&#39;,
 &#39;tryna&#39;,
 &#39;throw&#39;,
 &#39;everything&#39;,
 &#39;into&#39;,
 &#39;a&#39;,
 &#39;made-up&#39;,
 &#39;bit&#39;,
 &#39;that&#39;,
 &#39;is&#39;,
 &quot;n&#39;t&quot;,
 &#39;making&#39;,
 &#39;any&#39;,
 &#39;sense.&#39;,
 &#39;&lt;&#39;,
 &#39;br&#39;,
 &#39;&gt;&#39;,
 &#39;and&#39;,
 &#39;here&#39;,
 &quot;&#39;s&quot;,
 &#39;a&#39;,
 &#39;sentence&#39;,
 &#39;with&#39;,
 &#39;the&#39;,
 &#39;irregular&#39;,
 &#39;plural&#39;,
 &#39;feet&#39;,
 &#39;and&#39;,
 &#39;one&#39;,
 &#39;with&#39;,
 &#39;the&#39;,
 &#39;irregular&#39;,
 &#39;plural&#39;,
 &#39;geese&#39;,
 &#39;.&#39;]
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">n_types2_lower</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">tokens2_lower</span><span class="p">))</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">n_tokens2</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">n_types2</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">n_types2_lower</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>73
57
55
</pre></div>
</div>
</div>
</div>
</section>
<section id="stemming-and-lemmatizing-with-nltk">
<h2>Stemming and lemmatizing with NLTK<a class="headerlink" href="#stemming-and-lemmatizing-with-nltk" title="Link to this heading">#</a></h2>
<section id="stemming">
<h3>Stemming<a class="headerlink" href="#stemming" title="Link to this heading">#</a></h3>
<p>Stemmers remove any endings that may be <a class="reference external" href="https://en.wikipedia.org/wiki/Inflection">inflectional suffixes</a> in English. There are different versions of stemmers, even within NLTK. See the <a class="reference external" href="https://www.nltk.org/howto/stem.html">overview of stemming in NLTK</a>. Here, we’ll use the <a class="reference external" href="https://www.nltk.org/_modules/nltk/stem/porter.html">Porter Stemmer</a>, developed by Martin Porter.</p>
<p>Look at the output carefully and note where things don’t seem to make sense. This is because Porter removes anything that may possibly be an ending, including the ‘-er’ in ‘December’, because it is sometimes an inflectional ending in words like ‘clever’.</p>
</section>
<section id="lemmatization">
<h3>Lemmatization<a class="headerlink" href="#lemmatization" title="Link to this heading">#</a></h3>
<p>Lemmatizers are a bit smarter about inflection and are able to identify roots, even when no suffixes are involved (gave -&gt; give; feet -&gt; foot). We’ll use the <a class="reference external" href="https://www.nltk.org/api/nltk.stem.WordNetLemmatizer.html?highlight=wordnet">WordNet lemmatizer</a> in NLTK.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># assign the stemmer to a variable, &#39;stemmer&#39;</span>
<span class="n">stemmer</span> <span class="o">=</span> <span class="n">PorterStemmer</span><span class="p">()</span>

<span class="c1"># go through the list of tokens (tokens1)</span>
<span class="c1"># lower the tokens in that list</span>
<span class="c1"># use list comprehension (with the square brackets)</span>
 <span class="c1"># so that the stemmer can iterate over the list</span>
<span class="n">tokens1_st</span> <span class="o">=</span> <span class="p">[</span><span class="n">stemmer</span><span class="o">.</span><span class="n">stem</span><span class="p">(</span><span class="n">token</span><span class="o">.</span><span class="n">lower</span><span class="p">())</span> <span class="k">for</span> <span class="n">token</span> <span class="ow">in</span> <span class="n">tokens1</span><span class="p">]</span>
<span class="n">tokens2_st</span> <span class="o">=</span> <span class="p">[</span><span class="n">stemmer</span><span class="o">.</span><span class="n">stem</span><span class="p">(</span><span class="n">token</span><span class="o">.</span><span class="n">lower</span><span class="p">())</span> <span class="k">for</span> <span class="n">token</span> <span class="ow">in</span> <span class="n">tokens2</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">tokens2_st</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[&#39;thi&#39;,
 &#39;got&#39;,
 &#39;ta&#39;,
 &#39;be&#39;,
 &#39;the&#39;,
 &#39;wéïrdest&#39;,
 &#39;bit&#39;,
 &#39;of&#39;,
 &#39;text&#39;,
 &#39;that&#39;,
 &quot;&#39;s&quot;,
 &quot;ne&#39;er&quot;,
 &#39;gon&#39;,
 &#39;na&#39;,
 &#39;be&#39;,
 &#39;the&#39;,
 &#39;thing&#39;,
 &#39;you&#39;,
 &quot;&#39;ll&quot;,
 &#39;encount&#39;,
 &#39;,&#39;,
 &#39;but&#39;,
 &#39;i&#39;,
 &#39;have&#39;,
 &#39;to&#39;,
 &#39;give&#39;,
 &#39;,&#39;,
 &#39;gave&#39;,
 &#39;,&#39;,
 &#39;given&#39;,
 &#39;,&#39;,
 &#39;someth&#39;,
 &#39;!&#39;,
 &#39;,&#39;,
 &#39;even&#39;,
 &#39;the&#39;,
 &#39;weirdest&#39;,
 &#39;.&#39;,
 &#39;just&#39;,
 &#39;tryna&#39;,
 &#39;throw&#39;,
 &#39;everyth&#39;,
 &#39;into&#39;,
 &#39;a&#39;,
 &#39;made-up&#39;,
 &#39;bit&#39;,
 &#39;that&#39;,
 &#39;is&#39;,
 &quot;n&#39;t&quot;,
 &#39;make&#39;,
 &#39;ani&#39;,
 &#39;sense.&#39;,
 &#39;&lt;&#39;,
 &#39;br&#39;,
 &#39;&gt;&#39;,
 &#39;and&#39;,
 &#39;here&#39;,
 &quot;&#39;s&quot;,
 &#39;a&#39;,
 &#39;sentenc&#39;,
 &#39;with&#39;,
 &#39;the&#39;,
 &#39;irregular&#39;,
 &#39;plural&#39;,
 &#39;feet&#39;,
 &#39;and&#39;,
 &#39;one&#39;,
 &#39;with&#39;,
 &#39;the&#39;,
 &#39;irregular&#39;,
 &#39;plural&#39;,
 &#39;gees&#39;,
 &#39;.&#39;]
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">tokens1</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[&#39;In&#39;,
 &#39;December&#39;,
 &#39;2024&#39;,
 &#39;,&#39;,
 &#39;Clean&#39;,
 &#39;Energy&#39;,
 &#39;Research&#39;,
 &#39;Group&#39;,
 &#39;(&#39;,
 &#39;CERG&#39;,
 &#39;)&#39;,
 &#39;published&#39;,
 &#39;a&#39;,
 &#39;paper&#39;,
 &#39;calling&#39;,
 &#39;for&#39;,
 &#39;Canada&#39;,
 &#39;to&#39;,
 &#39;build&#39;,
 &#39;“&#39;,
 &#39;mass&#39;,
 &#39;utility-scale&#39;,
 &#39;solar&#39;,
 &#39;mega&#39;,
 &#39;projects&#39;,
 &#39;,&#39;,
 &#39;”&#39;,
 &#39;according&#39;,
 &#39;to&#39;,
 &#39;an&#39;,
 &#39;SFU&#39;,
 &#39;news&#39;,
 &#39;release&#39;,
 &#39;.&#39;,
 &#39;Utility-scale&#39;,
 &#39;solar&#39;,
 &#39;“&#39;,
 &#39;refers&#39;,
 &#39;to&#39;,
 &#39;large&#39;,
 &#39;solar&#39;,
 &#39;installations&#39;,
 &#39;designed&#39;,
 &#39;to&#39;,
 &#39;feed&#39;,
 &#39;power&#39;,
 &#39;directly&#39;,
 &#39;onto&#39;,
 &#39;the&#39;,
 &#39;electric&#39;,
 &#39;grid.&#39;,
 &#39;”&#39;,
 &#39;An&#39;,
 &#39;electric&#39;,
 &#39;grid&#39;,
 &#39;is&#39;,
 &#39;an&#39;,
 &#39;“&#39;,
 &#39;intricate&#39;,
 &#39;system&#39;,
 &#39;”&#39;,
 &#39;that&#39;,
 &#39;provides&#39;,
 &#39;electricity&#39;,
 &#39;“&#39;,
 &#39;all&#39;,
 &#39;the&#39;,
 &#39;way&#39;,
 &#39;from&#39;,
 &#39;its&#39;,
 &#39;generation&#39;,
 &#39;to&#39;,
 &#39;the&#39;,
 &#39;customers&#39;,
 &#39;that&#39;,
 &#39;use&#39;,
 &#39;it&#39;,
 &#39;for&#39;,
 &#39;their&#39;,
 &#39;daily&#39;,
 &#39;needs&#39;,
 &#39;.&#39;,
 &#39;”&#39;]
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># assign the lemmatizer to a variable</span>
<span class="n">lemmatizer</span> <span class="o">=</span> <span class="n">WordNetLemmatizer</span><span class="p">()</span>

<span class="c1"># go through the list of tokens and lemmatize</span>
<span class="n">tokens1_lm</span> <span class="o">=</span> <span class="p">[</span><span class="n">lemmatizer</span><span class="o">.</span><span class="n">lemmatize</span><span class="p">(</span><span class="n">token</span><span class="o">.</span><span class="n">lower</span><span class="p">())</span> <span class="k">for</span> <span class="n">token</span> <span class="ow">in</span> <span class="n">tokens1</span><span class="p">]</span>
<span class="n">tokens2_lm</span> <span class="o">=</span> <span class="p">[</span><span class="n">lemmatizer</span><span class="o">.</span><span class="n">lemmatize</span><span class="p">(</span><span class="n">token</span><span class="o">.</span><span class="n">lower</span><span class="p">())</span> <span class="k">for</span> <span class="n">token</span> <span class="ow">in</span> <span class="n">tokens2</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">tokens1_lm</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[&#39;in&#39;,
 &#39;december&#39;,
 &#39;2024&#39;,
 &#39;,&#39;,
 &#39;clean&#39;,
 &#39;energy&#39;,
 &#39;research&#39;,
 &#39;group&#39;,
 &#39;(&#39;,
 &#39;cerg&#39;,
 &#39;)&#39;,
 &#39;published&#39;,
 &#39;a&#39;,
 &#39;paper&#39;,
 &#39;calling&#39;,
 &#39;for&#39;,
 &#39;canada&#39;,
 &#39;to&#39;,
 &#39;build&#39;,
 &#39;“&#39;,
 &#39;mass&#39;,
 &#39;utility-scale&#39;,
 &#39;solar&#39;,
 &#39;mega&#39;,
 &#39;project&#39;,
 &#39;,&#39;,
 &#39;”&#39;,
 &#39;according&#39;,
 &#39;to&#39;,
 &#39;an&#39;,
 &#39;sfu&#39;,
 &#39;news&#39;,
 &#39;release&#39;,
 &#39;.&#39;,
 &#39;utility-scale&#39;,
 &#39;solar&#39;,
 &#39;“&#39;,
 &#39;refers&#39;,
 &#39;to&#39;,
 &#39;large&#39;,
 &#39;solar&#39;,
 &#39;installation&#39;,
 &#39;designed&#39;,
 &#39;to&#39;,
 &#39;feed&#39;,
 &#39;power&#39;,
 &#39;directly&#39;,
 &#39;onto&#39;,
 &#39;the&#39;,
 &#39;electric&#39;,
 &#39;grid.&#39;,
 &#39;”&#39;,
 &#39;an&#39;,
 &#39;electric&#39;,
 &#39;grid&#39;,
 &#39;is&#39;,
 &#39;an&#39;,
 &#39;“&#39;,
 &#39;intricate&#39;,
 &#39;system&#39;,
 &#39;”&#39;,
 &#39;that&#39;,
 &#39;provides&#39;,
 &#39;electricity&#39;,
 &#39;“&#39;,
 &#39;all&#39;,
 &#39;the&#39;,
 &#39;way&#39;,
 &#39;from&#39;,
 &#39;it&#39;,
 &#39;generation&#39;,
 &#39;to&#39;,
 &#39;the&#39;,
 &#39;customer&#39;,
 &#39;that&#39;,
 &#39;use&#39;,
 &#39;it&#39;,
 &#39;for&#39;,
 &#39;their&#39;,
 &#39;daily&#39;,
 &#39;need&#39;,
 &#39;.&#39;,
 &#39;”&#39;]
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">tokens2_lm</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[&#39;this&#39;,
 &#39;got&#39;,
 &#39;ta&#39;,
 &#39;be&#39;,
 &#39;the&#39;,
 &#39;wéïrdest&#39;,
 &#39;bit&#39;,
 &#39;of&#39;,
 &#39;text&#39;,
 &#39;that&#39;,
 &quot;&#39;s&quot;,
 &quot;ne&#39;er&quot;,
 &#39;gon&#39;,
 &#39;na&#39;,
 &#39;be&#39;,
 &#39;the&#39;,
 &#39;thing&#39;,
 &#39;you&#39;,
 &quot;&#39;ll&quot;,
 &#39;encounter&#39;,
 &#39;,&#39;,
 &#39;but&#39;,
 &#39;i&#39;,
 &#39;have&#39;,
 &#39;to&#39;,
 &#39;give&#39;,
 &#39;,&#39;,
 &#39;gave&#39;,
 &#39;,&#39;,
 &#39;given&#39;,
 &#39;,&#39;,
 &#39;something&#39;,
 &#39;!&#39;,
 &#39;,&#39;,
 &#39;even&#39;,
 &#39;the&#39;,
 &#39;weirdest&#39;,
 &#39;.&#39;,
 &#39;just&#39;,
 &#39;tryna&#39;,
 &#39;throw&#39;,
 &#39;everything&#39;,
 &#39;into&#39;,
 &#39;a&#39;,
 &#39;made-up&#39;,
 &#39;bit&#39;,
 &#39;that&#39;,
 &#39;is&#39;,
 &quot;n&#39;t&quot;,
 &#39;making&#39;,
 &#39;any&#39;,
 &#39;sense.&#39;,
 &#39;&lt;&#39;,
 &#39;br&#39;,
 &#39;&gt;&#39;,
 &#39;and&#39;,
 &#39;here&#39;,
 &quot;&#39;s&quot;,
 &#39;a&#39;,
 &#39;sentence&#39;,
 &#39;with&#39;,
 &#39;the&#39;,
 &#39;irregular&#39;,
 &#39;plural&#39;,
 &#39;foot&#39;,
 &#39;and&#39;,
 &#39;one&#39;,
 &#39;with&#39;,
 &#39;the&#39;,
 &#39;irregular&#39;,
 &#39;plural&#39;,
 &#39;goose&#39;,
 &#39;.&#39;]
</pre></div>
</div>
</div>
</div>
</section>
<section id="other-options-remove-non-ascii-characters-remove-html-tags">
<h3>Other options: remove non-ASCII characters, remove HTML tags<a class="headerlink" href="#other-options-remove-non-ascii-characters-remove-html-tags" title="Link to this heading">#</a></h3>
<p>There are additional things you may want to do to clean and normalize text, including converting everything to ASCII (wéïrdest -&gt; weirdest) and removing HTML tags (’<code class="docutils literal notranslate"><span class="pre">&lt;br&gt;</span></code>’, -&gt; ‘’ ). You’ll probably want to do that before tokenization, so that the angle brackets in HTML don’t get tokenized as punctuation.</p>
<p>The <a class="reference external" href="https://pypi.org/project/emoji/">emoji</a> library can also convert UTF emoji into descriptions (🤗 -&gt; ‘hugging face’)</p>
</section>
</section>
<section id="normalizing-text-with-spacy">
<h2>Normalizing text with spaCy<a class="headerlink" href="#normalizing-text-with-spacy" title="Link to this heading">#</a></h2>
<p>Now that you have seen how to do this with NLTK, the good news is that spaCy will do pretty much everything you need to do to clean and normalize text. It will also give you morphological and syntactic information about it. Go to the <code class="docutils literal notranslate"><span class="pre">spacy_install.ipynb</span></code> notebook for more information on how spaCy works.</p>
<p>We call spaCy by using the <code class="docutils literal notranslate"><span class="pre">nlp</span></code> object and passing it the text that we want to process. Then we can query and print the information contained in the <code class="docutils literal notranslate"><span class="pre">doc</span></code> object that spaCy creates.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># process the text with spaCy</span>
<span class="n">doc1</span> <span class="o">=</span> <span class="n">nlp</span><span class="p">(</span><span class="n">text1</span><span class="p">)</span>
<span class="n">doc2</span> <span class="o">=</span> <span class="n">nlp</span><span class="p">(</span><span class="n">text2</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># print the &#39;text&#39; attribute of each of the tokens</span>
<span class="k">for</span> <span class="n">token</span> <span class="ow">in</span> <span class="n">doc1</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">token</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>In
December
2024
,
Clean
Energy
Research
Group
(
CERG
)
published
a
paper
calling
for
Canada
to
build
“
mass
utility
-
scale
solar
mega
projects
,
”
according
to
an
SFU
news
release
.
Utility
-
scale
solar
“
refers
to
large
solar
installations
designed
to
feed
power
directly
onto
the
electric
grid
.
”
An
electric
grid
is
an
“
intricate
system
”
that
provides
electricity
“
all
the
way
from
its
generation
to
the
customers
that
use
it
for
their
daily
needs
.
”
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># if you want to see this in a single line, you can join the strings in the list, with a space between each</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="n">token</span><span class="o">.</span><span class="n">text</span> <span class="k">for</span> <span class="n">token</span> <span class="ow">in</span> <span class="n">doc1</span><span class="p">]))</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\r</span><span class="s2">&quot;</span><span class="p">)</span> <span class="c1"># this is just so that the two texts are separated on the screen by an empty line</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="n">token</span><span class="o">.</span><span class="n">text</span> <span class="k">for</span> <span class="n">token</span> <span class="ow">in</span> <span class="n">doc2</span><span class="p">]))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>In December 2024 , Clean Energy Research Group ( CERG ) published a paper calling for Canada to build “ mass utility - scale solar mega projects , ” according to an SFU news release . Utility - scale solar “ refers to large solar installations designed to feed power directly onto the electric grid . ” An electric grid is an “ intricate system ” that provides electricity “ all the way from its generation to the customers that use it for their daily needs . ”

This got ta be the wéïrdest bit of text that &#39;s ne&#39;er gon na be The thing you &#39;ll encounter , but I have to give , gave , given , something ! 
 , even the weirdest . Just tryna throw everything into a made - up bit that is n&#39;t making any sense.&lt;br &gt; And here &#39;s a sentence with the irregular plural feet and one with the irregular plural geese .
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># print the lemmas</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="n">token</span><span class="o">.</span><span class="n">lemma_</span> <span class="k">for</span> <span class="n">token</span> <span class="ow">in</span> <span class="n">doc1</span><span class="p">]))</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\r</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="n">token</span><span class="o">.</span><span class="n">lemma_</span> <span class="k">for</span> <span class="n">token</span> <span class="ow">in</span> <span class="n">doc2</span><span class="p">]))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>in December 2024 , Clean Energy Research Group ( CERG ) publish a paper call for Canada to build &quot; mass utility - scale solar mega project , &quot; accord to an SFU news release . utility - scale solar &quot; refer to large solar installation design to feed power directly onto the electric grid . &quot; an electric grid be an &quot; intricate system &quot; that provide electricity &quot; all the way from its generation to the customer that use it for their daily need . &quot;

this get to be the wéïrd bit of text that be ne&#39;er go to be the thing you will encounter , but I have to give , give , give , something ! 
 , even the weird . just tryna throw everything into a make - up bit that be not make any sense.&lt;br &gt; and here be a sentence with the irregular plural foot and one with the irregular plural geese .
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># print the part of speech of each word after the word</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">token</span><span class="o">.</span><span class="n">text</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">token</span><span class="o">.</span><span class="n">pos_</span><span class="si">}</span><span class="s2">&quot;</span> <span class="k">for</span> <span class="n">token</span> <span class="ow">in</span> <span class="n">doc1</span><span class="p">]))</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\r</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">token</span><span class="o">.</span><span class="n">text</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">token</span><span class="o">.</span><span class="n">pos_</span><span class="si">}</span><span class="s2">&quot;</span> <span class="k">for</span> <span class="n">token</span> <span class="ow">in</span> <span class="n">doc2</span><span class="p">]))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>In/ADP December/PROPN 2024/NUM ,/PUNCT Clean/PROPN Energy/PROPN Research/PROPN Group/PROPN (/PUNCT CERG/PROPN )/PUNCT published/VERB a/DET paper/NOUN calling/VERB for/SCONJ Canada/PROPN to/PART build/VERB “/PUNCT mass/ADJ utility/NOUN -/PUNCT scale/NOUN solar/ADJ mega/ADJ projects/NOUN ,/PUNCT ”/PUNCT according/VERB to/ADP an/DET SFU/PROPN news/NOUN release/NOUN ./PUNCT Utility/NOUN -/PUNCT scale/NOUN solar/NOUN “/PUNCT refers/VERB to/ADP large/ADJ solar/ADJ installations/NOUN designed/VERB to/PART feed/VERB power/NOUN directly/ADV onto/ADP the/DET electric/ADJ grid/NOUN ./PUNCT ”/PUNCT An/DET electric/ADJ grid/NOUN is/AUX an/DET “/PUNCT intricate/ADJ system/NOUN ”/PUNCT that/PRON provides/VERB electricity/NOUN “/PUNCT all/DET the/DET way/NOUN from/ADP its/PRON generation/NOUN to/ADP the/DET customers/NOUN that/PRON use/VERB it/PRON for/ADP their/PRON daily/ADJ needs/NOUN ./PUNCT ”/PUNCT

This/PRON got/VERB ta/PART be/AUX the/DET wéïrdest/ADJ bit/NOUN of/ADP text/NOUN that/PRON &#39;s/AUX ne&#39;er/NOUN gon/VERB na/PART be/AUX The/DET thing/NOUN you/PRON &#39;ll/AUX encounter/VERB ,/PUNCT but/CCONJ I/PRON have/VERB to/PART give/VERB ,/PUNCT gave/VERB ,/PUNCT given/VERB ,/PUNCT something/PRON !/PUNCT 
/SPACE ,/PUNCT even/ADV the/DET weirdest/ADJ ./PUNCT Just/ADV tryna/NOUN throw/VERB everything/PRON into/ADP a/DET made/VERB -/PUNCT up/ADP bit/NOUN that/PRON is/AUX n&#39;t/PART making/VERB any/DET sense.&lt;br/X &gt;/X And/CCONJ here/ADV &#39;s/AUX a/DET sentence/NOUN with/ADP the/DET irregular/ADJ plural/ADJ feet/NOUN and/CCONJ one/NUM with/ADP the/DET irregular/ADJ plural/ADJ geese/PROPN ./PUNCT
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># the doc object in spaCy contains all kinds of information</span>
<span class="c1"># including rich morphology for each word</span>
<span class="k">for</span> <span class="n">token</span> <span class="ow">in</span> <span class="n">doc1</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">token</span><span class="o">.</span><span class="n">text</span><span class="p">,</span> <span class="s2">&quot;</span><span class="se">\t\t</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">token</span><span class="o">.</span><span class="n">lemma_</span><span class="p">,</span> <span class="s2">&quot;</span><span class="se">\t\t</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">token</span><span class="o">.</span><span class="n">pos_</span><span class="p">,</span> <span class="s2">&quot;</span><span class="se">\t\t</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">token</span><span class="o">.</span><span class="n">morph</span><span class="p">)</span> <span class="c1"># the \t helps show sort of columns</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>In 		 in 		 ADP 		 
December 		 December 		 PROPN 		 Number=Sing
2024 		 2024 		 NUM 		 NumType=Card
, 		 , 		 PUNCT 		 PunctType=Comm
Clean 		 Clean 		 PROPN 		 Number=Sing
Energy 		 Energy 		 PROPN 		 Number=Sing
Research 		 Research 		 PROPN 		 Number=Sing
Group 		 Group 		 PROPN 		 Number=Sing
( 		 ( 		 PUNCT 		 PunctSide=Ini|PunctType=Brck
CERG 		 CERG 		 PROPN 		 Number=Sing
) 		 ) 		 PUNCT 		 PunctSide=Fin|PunctType=Brck
published 		 publish 		 VERB 		 Tense=Past|VerbForm=Fin
a 		 a 		 DET 		 Definite=Ind|PronType=Art
paper 		 paper 		 NOUN 		 Number=Sing
calling 		 call 		 VERB 		 Aspect=Prog|Tense=Pres|VerbForm=Part
for 		 for 		 SCONJ 		 
Canada 		 Canada 		 PROPN 		 Number=Sing
to 		 to 		 PART 		 
build 		 build 		 VERB 		 VerbForm=Inf
“ 		 &quot; 		 PUNCT 		 PunctSide=Ini|PunctType=Quot
mass 		 mass 		 ADJ 		 Degree=Pos
utility 		 utility 		 NOUN 		 Number=Sing
- 		 - 		 PUNCT 		 PunctType=Dash
scale 		 scale 		 NOUN 		 Number=Sing
solar 		 solar 		 ADJ 		 Degree=Pos
mega 		 mega 		 ADJ 		 Degree=Pos
projects 		 project 		 NOUN 		 Number=Plur
, 		 , 		 PUNCT 		 PunctType=Comm
” 		 &quot; 		 PUNCT 		 PunctSide=Fin|PunctType=Quot
according 		 accord 		 VERB 		 Aspect=Prog|Tense=Pres|VerbForm=Part
to 		 to 		 ADP 		 
an 		 an 		 DET 		 Definite=Ind|PronType=Art
SFU 		 SFU 		 PROPN 		 Number=Sing
news 		 news 		 NOUN 		 Number=Sing
release 		 release 		 NOUN 		 Number=Sing
. 		 . 		 PUNCT 		 PunctType=Peri
Utility 		 utility 		 NOUN 		 Number=Sing
- 		 - 		 PUNCT 		 PunctType=Dash
scale 		 scale 		 NOUN 		 Number=Sing
solar 		 solar 		 NOUN 		 Number=Sing
“ 		 &quot; 		 PUNCT 		 PunctSide=Ini|PunctType=Quot
refers 		 refer 		 VERB 		 Number=Sing|Person=3|Tense=Pres|VerbForm=Fin
to 		 to 		 ADP 		 
large 		 large 		 ADJ 		 Degree=Pos
solar 		 solar 		 ADJ 		 Degree=Pos
installations 		 installation 		 NOUN 		 Number=Plur
designed 		 design 		 VERB 		 Aspect=Perf|Tense=Past|VerbForm=Part
to 		 to 		 PART 		 
feed 		 feed 		 VERB 		 VerbForm=Inf
power 		 power 		 NOUN 		 Number=Sing
directly 		 directly 		 ADV 		 
onto 		 onto 		 ADP 		 
the 		 the 		 DET 		 Definite=Def|PronType=Art
electric 		 electric 		 ADJ 		 Degree=Pos
grid 		 grid 		 NOUN 		 Number=Sing
. 		 . 		 PUNCT 		 PunctType=Peri
” 		 &quot; 		 PUNCT 		 PunctSide=Fin|PunctType=Quot
An 		 an 		 DET 		 Definite=Ind|PronType=Art
electric 		 electric 		 ADJ 		 Degree=Pos
grid 		 grid 		 NOUN 		 Number=Sing
is 		 be 		 AUX 		 Mood=Ind|Number=Sing|Person=3|Tense=Pres|VerbForm=Fin
an 		 an 		 DET 		 Definite=Ind|PronType=Art
“ 		 &quot; 		 PUNCT 		 PunctSide=Ini|PunctType=Quot
intricate 		 intricate 		 ADJ 		 Degree=Pos
system 		 system 		 NOUN 		 Number=Sing
” 		 &quot; 		 PUNCT 		 PunctSide=Fin|PunctType=Quot
that 		 that 		 PRON 		 PronType=Rel
provides 		 provide 		 VERB 		 Number=Sing|Person=3|Tense=Pres|VerbForm=Fin
electricity 		 electricity 		 NOUN 		 Number=Sing
“ 		 &quot; 		 PUNCT 		 PunctSide=Ini|PunctType=Quot
all 		 all 		 DET 		 
the 		 the 		 DET 		 Definite=Def|PronType=Art
way 		 way 		 NOUN 		 Number=Sing
from 		 from 		 ADP 		 
its 		 its 		 PRON 		 Gender=Neut|Number=Sing|Person=3|Poss=Yes|PronType=Prs
generation 		 generation 		 NOUN 		 Number=Sing
to 		 to 		 ADP 		 
the 		 the 		 DET 		 Definite=Def|PronType=Art
customers 		 customer 		 NOUN 		 Number=Plur
that 		 that 		 PRON 		 PronType=Rel
use 		 use 		 VERB 		 Tense=Pres|VerbForm=Fin
it 		 it 		 PRON 		 Case=Acc|Gender=Neut|Number=Sing|Person=3|PronType=Prs
for 		 for 		 ADP 		 
their 		 their 		 PRON 		 Number=Plur|Person=3|Poss=Yes|PronType=Prs
daily 		 daily 		 ADJ 		 Degree=Pos
needs 		 need 		 NOUN 		 Number=Plur
. 		 . 		 PUNCT 		 PunctType=Peri
” 		 &quot; 		 PUNCT 		 PunctSide=Fin|PunctType=Quot
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># if you don&#39;t know what the abbreviations mean, </span>
<span class="c1"># you can ask for an explanation</span>
<span class="n">spacy</span><span class="o">.</span><span class="n">explain</span><span class="p">(</span><span class="s2">&quot;ADP&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&#39;adposition&#39;
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># doc also includes syntactic information about heads and dependents</span>
<span class="c1"># including rich morphology for each word</span>
<span class="k">for</span> <span class="n">token</span> <span class="ow">in</span> <span class="n">doc1</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">token</span><span class="o">.</span><span class="n">text</span><span class="p">,</span> <span class="s2">&quot;</span><span class="se">\t\t</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">token</span><span class="o">.</span><span class="n">pos_</span><span class="p">,</span> <span class="s2">&quot;</span><span class="se">\t\t</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">token</span><span class="o">.</span><span class="n">dep_</span><span class="p">,</span> <span class="s2">&quot;</span><span class="se">\t\t</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">token</span><span class="o">.</span><span class="n">head</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>In 		 ADP 		 prep 		 published
December 		 PROPN 		 pobj 		 In
2024 		 NUM 		 nummod 		 December
, 		 PUNCT 		 punct 		 published
Clean 		 PROPN 		 compound 		 Energy
Energy 		 PROPN 		 compound 		 Group
Research 		 PROPN 		 compound 		 Group
Group 		 PROPN 		 nsubj 		 published
( 		 PUNCT 		 punct 		 Group
CERG 		 PROPN 		 appos 		 Group
) 		 PUNCT 		 punct 		 Group
published 		 VERB 		 ROOT 		 published
a 		 DET 		 det 		 paper
paper 		 NOUN 		 dobj 		 published
calling 		 VERB 		 acl 		 paper
for 		 SCONJ 		 mark 		 build
Canada 		 PROPN 		 nsubj 		 build
to 		 PART 		 aux 		 build
build 		 VERB 		 advcl 		 calling
“ 		 PUNCT 		 punct 		 projects
mass 		 ADJ 		 amod 		 projects
utility 		 NOUN 		 nmod 		 scale
- 		 PUNCT 		 punct 		 scale
scale 		 NOUN 		 nmod 		 projects
solar 		 ADJ 		 amod 		 mega
mega 		 ADJ 		 compound 		 projects
projects 		 NOUN 		 dobj 		 build
, 		 PUNCT 		 punct 		 published
” 		 PUNCT 		 punct 		 published
according 		 VERB 		 prep 		 published
to 		 ADP 		 prep 		 according
an 		 DET 		 det 		 release
SFU 		 PROPN 		 compound 		 release
news 		 NOUN 		 compound 		 release
release 		 NOUN 		 pobj 		 to
. 		 PUNCT 		 punct 		 published
Utility 		 NOUN 		 compound 		 scale
- 		 PUNCT 		 punct 		 scale
scale 		 NOUN 		 compound 		 solar
solar 		 NOUN 		 nsubj 		 refers
“ 		 PUNCT 		 punct 		 refers
refers 		 VERB 		 ROOT 		 refers
to 		 ADP 		 prep 		 refers
large 		 ADJ 		 amod 		 installations
solar 		 ADJ 		 amod 		 installations
installations 		 NOUN 		 pobj 		 to
designed 		 VERB 		 acl 		 installations
to 		 PART 		 aux 		 feed
feed 		 VERB 		 xcomp 		 designed
power 		 NOUN 		 dobj 		 feed
directly 		 ADV 		 advmod 		 onto
onto 		 ADP 		 prep 		 feed
the 		 DET 		 det 		 grid
electric 		 ADJ 		 amod 		 grid
grid 		 NOUN 		 pobj 		 onto
. 		 PUNCT 		 punct 		 refers
” 		 PUNCT 		 punct 		 refers
An 		 DET 		 det 		 grid
electric 		 ADJ 		 amod 		 grid
grid 		 NOUN 		 nsubj 		 is
is 		 AUX 		 ROOT 		 is
an 		 DET 		 det 		 system
“ 		 PUNCT 		 punct 		 system
intricate 		 ADJ 		 amod 		 system
system 		 NOUN 		 attr 		 is
” 		 PUNCT 		 punct 		 system
that 		 PRON 		 nsubj 		 provides
provides 		 VERB 		 relcl 		 system
electricity 		 NOUN 		 dobj 		 provides
“ 		 PUNCT 		 punct 		 system
all 		 DET 		 predet 		 way
the 		 DET 		 det 		 way
way 		 NOUN 		 npadvmod 		 from
from 		 ADP 		 prep 		 system
its 		 PRON 		 poss 		 generation
generation 		 NOUN 		 pobj 		 from
to 		 ADP 		 prep 		 from
the 		 DET 		 det 		 customers
customers 		 NOUN 		 pobj 		 to
that 		 PRON 		 nsubj 		 use
use 		 VERB 		 relcl 		 customers
it 		 PRON 		 dobj 		 use
for 		 ADP 		 prep 		 use
their 		 PRON 		 poss 		 needs
daily 		 ADJ 		 amod 		 needs
needs 		 NOUN 		 pobj 		 for
. 		 PUNCT 		 punct 		 is
” 		 PUNCT 		 punct 		 is
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># btw, you can still count tokens and types with spaCy</span>
<span class="n">tokens1</span> <span class="o">=</span> <span class="p">[</span><span class="n">token</span><span class="o">.</span><span class="n">text</span> <span class="k">for</span> <span class="n">token</span> <span class="ow">in</span> <span class="n">doc1</span><span class="p">]</span>
<span class="n">types1</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">tokens1</span><span class="p">)</span>

<span class="c1"># you can see those lists</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;tokens: &quot;</span><span class="p">,</span> <span class="n">tokens1</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\r</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;types: &quot;</span><span class="p">,</span> <span class="n">types1</span><span class="p">)</span>

<span class="c1"># and you can print their length</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\r</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;number of tokens: &quot;</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">tokens1</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;number of types: &quot;</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">types1</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>tokens:  [&#39;In&#39;, &#39;December&#39;, &#39;2024&#39;, &#39;,&#39;, &#39;Clean&#39;, &#39;Energy&#39;, &#39;Research&#39;, &#39;Group&#39;, &#39;(&#39;, &#39;CERG&#39;, &#39;)&#39;, &#39;published&#39;, &#39;a&#39;, &#39;paper&#39;, &#39;calling&#39;, &#39;for&#39;, &#39;Canada&#39;, &#39;to&#39;, &#39;build&#39;, &#39;“&#39;, &#39;mass&#39;, &#39;utility&#39;, &#39;-&#39;, &#39;scale&#39;, &#39;solar&#39;, &#39;mega&#39;, &#39;projects&#39;, &#39;,&#39;, &#39;”&#39;, &#39;according&#39;, &#39;to&#39;, &#39;an&#39;, &#39;SFU&#39;, &#39;news&#39;, &#39;release&#39;, &#39;.&#39;, &#39;Utility&#39;, &#39;-&#39;, &#39;scale&#39;, &#39;solar&#39;, &#39;“&#39;, &#39;refers&#39;, &#39;to&#39;, &#39;large&#39;, &#39;solar&#39;, &#39;installations&#39;, &#39;designed&#39;, &#39;to&#39;, &#39;feed&#39;, &#39;power&#39;, &#39;directly&#39;, &#39;onto&#39;, &#39;the&#39;, &#39;electric&#39;, &#39;grid&#39;, &#39;.&#39;, &#39;”&#39;, &#39;An&#39;, &#39;electric&#39;, &#39;grid&#39;, &#39;is&#39;, &#39;an&#39;, &#39;“&#39;, &#39;intricate&#39;, &#39;system&#39;, &#39;”&#39;, &#39;that&#39;, &#39;provides&#39;, &#39;electricity&#39;, &#39;“&#39;, &#39;all&#39;, &#39;the&#39;, &#39;way&#39;, &#39;from&#39;, &#39;its&#39;, &#39;generation&#39;, &#39;to&#39;, &#39;the&#39;, &#39;customers&#39;, &#39;that&#39;, &#39;use&#39;, &#39;it&#39;, &#39;for&#39;, &#39;their&#39;, &#39;daily&#39;, &#39;needs&#39;, &#39;.&#39;, &#39;”&#39;]

types:  {&#39;grid&#39;, &#39;electric&#39;, &#39;Canada&#39;, &#39;to&#39;, &#39;system&#39;, &#39;In&#39;, &#39;solar&#39;, &#39;calling&#39;, &#39;utility&#39;, &#39;projects&#39;, &#39;use&#39;, &#39;.&#39;, &#39;an&#39;, &#39;way&#39;, &#39;that&#39;, &#39;designed&#39;, &#39;-&#39;, &#39;a&#39;, &#39;the&#39;, &#39;its&#39;, &#39;Energy&#39;, &#39;“&#39;, &#39;installations&#39;, &#39;mega&#39;, &#39;provides&#39;, &#39;(&#39;, &#39;,&#39;, &#39;December&#39;, &#39;feed&#39;, &#39;for&#39;, &#39;all&#39;, &#39;Clean&#39;, &#39;mass&#39;, &#39;it&#39;, &#39;paper&#39;, &#39;CERG&#39;, &#39;Research&#39;, &#39;scale&#39;, &#39;)&#39;, &#39;published&#39;, &#39;2024&#39;, &#39;power&#39;, &#39;intricate&#39;, &#39;from&#39;, &#39;generation&#39;, &#39;according&#39;, &#39;refers&#39;, &#39;Utility&#39;, &#39;An&#39;, &#39;release&#39;, &#39;”&#39;, &#39;is&#39;, &#39;build&#39;, &#39;Group&#39;, &#39;customers&#39;, &#39;SFU&#39;, &#39;large&#39;, &#39;onto&#39;, &#39;daily&#39;, &#39;their&#39;, &#39;news&#39;, &#39;directly&#39;, &#39;electricity&#39;, &#39;needs&#39;}

number of tokens:  88
number of types:  64
</pre></div>
</div>
</div>
</div>
<section id="using-pandas-to-show-the-output">
<h3>Using pandas to show the output<a class="headerlink" href="#using-pandas-to-show-the-output" title="Link to this heading">#</a></h3>
<p>You can also store the information into a pandas dataframe, which makes it much more readable and easy to save.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">data1</span> <span class="o">=</span> <span class="p">[]</span>

<span class="k">for</span> <span class="n">token</span> <span class="ow">in</span> <span class="n">doc1</span><span class="p">:</span>
    <span class="n">data1</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">token</span><span class="o">.</span><span class="n">text</span><span class="p">,</span> <span class="n">token</span><span class="o">.</span><span class="n">pos_</span><span class="p">,</span> <span class="n">token</span><span class="o">.</span><span class="n">dep_</span><span class="p">,</span> <span class="n">token</span><span class="o">.</span><span class="n">head</span><span class="p">])</span>
    
<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">data1</span><span class="p">)</span>
<span class="n">df</span><span class="o">.</span><span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Text&#39;</span><span class="p">,</span> <span class="s1">&#39;Tag&#39;</span><span class="p">,</span> <span class="s1">&#39;Dependency&#39;</span><span class="p">,</span> <span class="s1">&#39;Head&#39;</span><span class="p">]</span>

<span class="n">df</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Text</th>
      <th>Tag</th>
      <th>Dependency</th>
      <th>Head</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>In</td>
      <td>ADP</td>
      <td>prep</td>
      <td>published</td>
    </tr>
    <tr>
      <th>1</th>
      <td>December</td>
      <td>PROPN</td>
      <td>pobj</td>
      <td>In</td>
    </tr>
    <tr>
      <th>2</th>
      <td>2024</td>
      <td>NUM</td>
      <td>nummod</td>
      <td>December</td>
    </tr>
    <tr>
      <th>3</th>
      <td>,</td>
      <td>PUNCT</td>
      <td>punct</td>
      <td>published</td>
    </tr>
    <tr>
      <th>4</th>
      <td>Clean</td>
      <td>PROPN</td>
      <td>compound</td>
      <td>Energy</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>83</th>
      <td>their</td>
      <td>PRON</td>
      <td>poss</td>
      <td>needs</td>
    </tr>
    <tr>
      <th>84</th>
      <td>daily</td>
      <td>ADJ</td>
      <td>amod</td>
      <td>needs</td>
    </tr>
    <tr>
      <th>85</th>
      <td>needs</td>
      <td>NOUN</td>
      <td>pobj</td>
      <td>for</td>
    </tr>
    <tr>
      <th>86</th>
      <td>.</td>
      <td>PUNCT</td>
      <td>punct</td>
      <td>is</td>
    </tr>
    <tr>
      <th>87</th>
      <td>”</td>
      <td>PUNCT</td>
      <td>punct</td>
      <td>is</td>
    </tr>
  </tbody>
</table>
<p>88 rows × 4 columns</p>
</div></div></div>
</div>
</section>
</section>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="named-entity-recognition">
<h1>Named Entity Recognition<a class="headerlink" href="#named-entity-recognition" title="Link to this heading">#</a></h1>
<p>Named Entity Recognition (NER) is the process of identifying and labelling <em>named entities</em>, that is, real world objects, locations, and identifiers such as dates, currency, or quantities. It is very useful if you want to know, for instance, who is mentioned in a text, which countries are involved, or which dates. It is what allows your email or messaging application to identify dates and suggest a calendar entry, as in the image below, from the iPhone Notes app.</p>
<a href="./img/ner_date.jpeg" target="_blank">
<img src="./img/ner_date.jpeg" width="100" height="200" style="border: 1px solid gray; padding: 5px;"> </a>
<p>spaCy has a pretty powerful NER module. It can give you the named entities in a text, with the label for each word that is part of the entity. It also knows the boundaries of the entire entity. So it knows that “Clean”, “Energy”, “Research”, and “Group” all have the ORG (for organization) label, but it also knows that the full entity is “Clean Energy Research Group”.</p>
<p>You can list all the entities in a text with the usual for loop. Using the <a class="reference external" href="https://spacy.io/usage/visualizers">displacy module</a>, you can also visualize the boundaries and the types in different colours.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># print each token and its entity label, if it has one</span>
<span class="k">for</span> <span class="n">ent</span> <span class="ow">in</span> <span class="n">doc1</span><span class="o">.</span><span class="n">ents</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">ent</span><span class="o">.</span><span class="n">text</span><span class="p">,</span> <span class="n">ent</span><span class="o">.</span><span class="n">label_</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>December 2024 DATE
Clean Energy Research Group ORG
CERG ORG
Canada GPE
SFU ORG
daily DATE
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># same for doc2, but it doesn&#39;t contain entities</span>
<span class="k">for</span> <span class="n">ent</span> <span class="ow">in</span> <span class="n">doc2</span><span class="o">.</span><span class="n">ents</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">ent</span><span class="o">.</span><span class="n">text</span><span class="p">,</span> <span class="n">ent</span><span class="o">.</span><span class="n">label_</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>geese NORP
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># it&#39;s useful to count and store the named entities in a text</span>

<span class="c1"># create an empty list</span>
<span class="n">named_ents1</span> <span class="o">=</span> <span class="p">[]</span>

<span class="c1"># go through the entities and append each to the list</span>
<span class="k">for</span> <span class="n">ent</span> <span class="ow">in</span> <span class="n">doc1</span><span class="o">.</span><span class="n">ents</span><span class="p">:</span>
    <span class="n">named_ents1</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">ent</span><span class="o">.</span><span class="n">text</span><span class="p">,</span> <span class="n">ent</span><span class="o">.</span><span class="n">label_</span><span class="p">))</span>
    
<span class="nb">print</span><span class="p">(</span><span class="n">named_ents1</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[(&#39;December 2024&#39;, &#39;DATE&#39;), (&#39;Clean Energy Research Group&#39;, &#39;ORG&#39;), (&#39;CERG&#39;, &#39;ORG&#39;), (&#39;Canada&#39;, &#39;GPE&#39;), (&#39;SFU&#39;, &#39;ORG&#39;), (&#39;daily&#39;, &#39;DATE&#39;)]
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># create a df for the entities, from the list above </span>
<span class="n">df_ents1</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">named_ents1</span><span class="p">)</span>
<span class="c1"># name the columns</span>
<span class="n">df_ents1</span><span class="o">.</span><span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Entity&#39;</span><span class="p">,</span> <span class="s1">&#39;Label&#39;</span><span class="p">]</span>
<span class="c1"># print</span>
<span class="n">df_ents1</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Entity</th>
      <th>Label</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>December 2024</td>
      <td>DATE</td>
    </tr>
    <tr>
      <th>1</th>
      <td>Clean Energy Research Group</td>
      <td>ORG</td>
    </tr>
    <tr>
      <th>2</th>
      <td>CERG</td>
      <td>ORG</td>
    </tr>
    <tr>
      <th>3</th>
      <td>Canada</td>
      <td>GPE</td>
    </tr>
    <tr>
      <th>4</th>
      <td>SFU</td>
      <td>ORG</td>
    </tr>
    <tr>
      <th>5</th>
      <td>daily</td>
      <td>DATE</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># visualize the entities</span>
<span class="n">displacy</span><span class="o">.</span><span class="n">render</span><span class="p">(</span><span class="n">doc1</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="s2">&quot;ent&quot;</span><span class="p">,</span> <span class="n">jupyter</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span class="tex2jax_ignore"><div class="entities" style="line-height: 2.5; direction: ltr">In 
<mark class="entity" style="background: #bfe1d9; padding: 0.45em 0.6em; margin: 0 0.25em; line-height: 1; border-radius: 0.35em;">
    December 2024
    <span style="font-size: 0.8em; font-weight: bold; line-height: 1; border-radius: 0.35em; vertical-align: middle; margin-left: 0.5rem">DATE</span>
</mark>
, 
<mark class="entity" style="background: #7aecec; padding: 0.45em 0.6em; margin: 0 0.25em; line-height: 1; border-radius: 0.35em;">
    Clean Energy Research Group
    <span style="font-size: 0.8em; font-weight: bold; line-height: 1; border-radius: 0.35em; vertical-align: middle; margin-left: 0.5rem">ORG</span>
</mark>
 (
<mark class="entity" style="background: #7aecec; padding: 0.45em 0.6em; margin: 0 0.25em; line-height: 1; border-radius: 0.35em;">
    CERG
    <span style="font-size: 0.8em; font-weight: bold; line-height: 1; border-radius: 0.35em; vertical-align: middle; margin-left: 0.5rem">ORG</span>
</mark>
) published a paper calling for 
<mark class="entity" style="background: #feca74; padding: 0.45em 0.6em; margin: 0 0.25em; line-height: 1; border-radius: 0.35em;">
    Canada
    <span style="font-size: 0.8em; font-weight: bold; line-height: 1; border-radius: 0.35em; vertical-align: middle; margin-left: 0.5rem">GPE</span>
</mark>
 to build “mass utility-scale solar mega projects,” according to an 
<mark class="entity" style="background: #7aecec; padding: 0.45em 0.6em; margin: 0 0.25em; line-height: 1; border-radius: 0.35em;">
    SFU
    <span style="font-size: 0.8em; font-weight: bold; line-height: 1; border-radius: 0.35em; vertical-align: middle; margin-left: 0.5rem">ORG</span>
</mark>
 news release. Utility-scale solar “refers to large solar installations designed to feed power directly onto the electric grid.” An electric grid is an “intricate system” that provides electricity “all the way from its generation to the customers that use it for their 
<mark class="entity" style="background: #bfe1d9; padding: 0.45em 0.6em; margin: 0 0.25em; line-height: 1; border-radius: 0.35em;">
    daily
    <span style="font-size: 0.8em; font-weight: bold; line-height: 1; border-radius: 0.35em; vertical-align: middle; margin-left: 0.5rem">DATE</span>
</mark>
 needs.”</div></span></div></div>
</div>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="summary">
<h1>Summary<a class="headerlink" href="#summary" title="Link to this heading">#</a></h1>
<p>We have learned quite a bit! Text normalization includes:</p>
<ul class="simple">
<li><p>Lowercasing the words</p></li>
<li><p>Tokenizing (identifying words, punctuation, anything else)</p></li>
<li><p>Stemming</p></li>
<li><p>Lemmatizing</p></li>
</ul>
<p>And we have learned to do this with both NLTK and spaCy.</p>
<p>We have also learned about <strong>Named Entity Recognition</strong> and how to extract entities with spaCy.</p>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./."
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#">Ling 380 - Week 6</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#normalizing-data-named-entity-recognition">Normalizing data. Named entity recognition</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#normalizing-data">Normalizing data</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#tokenizing-without-lowercase">Tokenizing without lowercase</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#tokenizing-after-lowercasing">Tokenizing after lowercasing</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#stemming-and-lemmatizing-with-nltk">Stemming and lemmatizing with NLTK</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#stemming">Stemming</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#lemmatization">Lemmatization</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#other-options-remove-non-ascii-characters-remove-html-tags">Other options: remove non-ASCII characters, remove HTML tags</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#normalizing-text-with-spacy">Normalizing text with spaCy</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#using-pandas-to-show-the-output">Using pandas to show the output</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#named-entity-recognition">Named Entity Recognition</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#summary">Summary</a></li>
</ul>

  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By The Jupyter Book Community
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2023.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b"></script>
<script src="_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>